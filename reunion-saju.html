<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš´ì  - ì‹¬ì¸µ ì¬íšŒ ì»¨ì„¤íŒ…</title>
    <script src="https://unpkg.com/lunar-javascript/lunar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <style>
        @font-face {
            font-family: 'ThinRounded';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/ThinDungGeunMo.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* ê¸°ì¡´ ì¬íšŒ í˜ì´ì§€ í…Œë§ˆ ì»¬ëŸ¬ ìœ ì§€ */
            --bg-color: #0F172A;
            --header-bg: #020617;
            --sidebar-bg: #1E293B;
            --accent-color: #38BDF8;
            --highlight-color: #818CF8;
            --text-color: #E2E8F0;
            --panel-bg: rgba(30, 41, 59, 0.7);
            --border-color: rgba(56, 189, 248, 0.3);
            --danger-color: #F43F5E;
            --card-bg: rgba(15, 23, 42, 0.6);
        }

        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); border-radius: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 10px; border: 2px solid var(--bg-color); }
        ::-webkit-scrollbar-thumb:hover { background: var(--highlight-color); }
        html { scrollbar-width: thin; scrollbar-color: var(--accent-color) var(--bg-color); }

        body {
            font-family: 'ThinRounded', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            line-height: 1.7;
        }

        /* --- [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ êµ¬ì¡°] ìƒë‹¨ í—¤ë” --- */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background-color: var(--header-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo img { height: 40px; width: auto; }

        /* [PCìš©] ìƒë‹¨ ë©”ë‰´ */
        .top-menu { display: flex; gap: 30px; height: 100%; align-items: center; }
        .menu-item { position: relative; height: 100%; display: flex; align-items: center; cursor: pointer; }
        .menu-title { color: #94A3B8; text-decoration: none; font-size: 1.1rem; transition: 0.3s; white-space: nowrap; }
        .menu-item:hover .menu-title { color: var(--accent-color); }

        /* [PCìš©] ë“œë¡­ë‹¤ìš´ ìƒì„¸ ë©”ë‰´ */
        .dropdown-content {
            display: none;
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--header-bg);
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            border: 1px solid var(--accent-color);
            border-radius: 0 0 10px 10px;
            z-index: 1001;
            flex-direction: column;
            padding: 10px 0;
        }
        .dropdown-content a { color: var(--text-color); padding: 12px 16px; text-decoration: none; display: block; font-size: 0.95rem; text-align: center; }
        .dropdown-content a:hover { background-color: var(--sidebar-bg); color: var(--accent-color); }
        
        @media (min-width: 769px) { .menu-item:hover .dropdown-content { display: flex; } }

        /* [ëª¨ë°”ì¼ìš©] í–„ë²„ê±° ë²„íŠ¼ (PCì—ì„œëŠ” ìˆ¨ê¹€) */
        .hamburger-btn {
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ (PC) */
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
            z-index: 1100;
        }
        .hamburger-btn span {
            display: block;
            width: 100%;
            height: 3px;
            background-color: var(--accent-color);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        .hamburger-btn.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
        .hamburger-btn.active span:nth-child(2) { opacity: 0; }
        .hamburger-btn.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }


        /* --- [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ êµ¬ì¡°] ì¢Œì¸¡ ì‚¬ì´ë“œë°” --- */
        .sidebar {
            position: fixed;
            top: 70px;
            left: 0; /* PC: í•­ìƒ ë³´ì„ */
            width: 250px; /* ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ ë„ˆë¹„ */
            height: calc(100vh - 70px);
            background-color: var(--sidebar-bg);
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 1050;
            transition: left 0.3s ease-in-out; /* ëª¨ë°”ì¼ ìŠ¬ë¼ì´ë“œ íš¨ê³¼ */
        }
        .category-title { font-size: 1.2rem; color: var(--accent-color); margin-bottom: 10px; display: block; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 5px; }
        .sub-menu { list-style: none; padding-left: 10px; margin-bottom: 25px; }
        .sub-menu li { margin: 8px 0; }
        .sub-menu a { color: #CBD5E1; text-decoration: none; font-size: 0.95rem; transition: 0.2s; }
        .sub-menu a:hover { color: #fff; padding-left: 5px; color: var(--accent-color); }

        /* --- [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ êµ¬ì¡°] ëª¨ë°”ì¼ìš© ë°°ê²½ ì˜¤ë²„ë ˆì´ --- */
        .overlay {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: calc(100vh - 70px);
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1040;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .overlay.active { display: block; opacity: 1; }

        /* --- [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ êµ¬ì¡°] ë©”ì¸ ì˜ì—­ --- */
        main {
            margin-top: 70px;
            margin-left: 250px; /* PC: ì‚¬ì´ë“œë°” ê³µê°„ í™•ë³´ */
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: calc(100vh - 70px);
            background: radial-gradient(circle at 50% 10%, #1e1b4b 0%, var(--bg-color) 80%);
            transition: margin-left 0.3s ease;
        }

        /* --- ê¸°ì¡´ ì¬íšŒ í˜ì´ì§€ ìŠ¤íƒ€ì¼ --- */
        .page-header { text-align: center; margin-bottom: 50px; }
        .page-title { font-size: 2.8rem; color: var(--accent-color); text-shadow: 0 0 25px rgba(56, 189, 248, 0.4); margin-bottom: 15px; }
        .page-desc { color: #94A3B8; font-size: 1.1rem; max-width: 700px; margin: 0 auto; word-break: keep-all; }

        .input-container {
            width: 100%; max-width: 1000px;
            background: var(--panel-bg); border: 1px solid var(--border-color);
            border-radius: 20px; padding: 40px;
            backdrop-filter: blur(15px); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .couple-grid { display: grid; grid-template-columns: 1fr 60px 1fr; gap: 30px; align-items: start; }
        
        .person-box { 
            background: rgba(0,0,0,0.3); padding: 30px 25px; border-radius: 15px; 
            border: 1px solid rgba(255,255,255,0.05); position: relative; transition: 0.3s;
        }
        .person-box:hover { border-color: var(--highlight-color); }
        
        .person-tag { 
            position: absolute; top: -14px; left: 20px; background: var(--bg-color); border: 1px solid var(--highlight-color);
            color: var(--highlight-color); padding: 4px 15px; font-size: 0.9rem; border-radius: 20px; font-weight: bold;
        }
        
        .vs-badge { 
            display: flex; align-items: center; justify-content: center; height: 100%; 
            font-size: 2rem; color: #64748B; font-weight: bold; padding-top: 60px;
        }

        .input-label { display: block; color: #94A3B8; font-size: 0.95rem; margin-bottom: 8px; font-weight: bold; }
        .input-field {
            width: 100%; padding: 14px; border-radius: 10px; border: 1px solid #475569;
            background: rgba(15, 23, 42, 0.6); color: #fff; font-size: 1rem; font-family: inherit; outline: none; transition: 0.3s;
        }
        .input-field:focus { border-color: var(--accent-color); }
        .date-grid { display: grid; grid-template-columns: 1.2fr 0.9fr 0.9fr; gap: 8px; }

        .submit-btn {
            width: 100%; padding: 20px; margin-top: 40px; border: none; border-radius: 15px;
            background: linear-gradient(135deg, #0284c7, #4f46e5);
            color: #fff; font-size: 1.4rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 30px rgba(79, 70, 229, 0.4); transition: 0.3s; letter-spacing: 1px;
        }
        .submit-btn:hover { transform: translateY(-3px); filter: brightness(1.2); }

        /* ê²°ê³¼ ì˜ì—­ */
        #result-area { display: none; width: 100%; max-width: 1000px; animation: fadeInUp 0.8s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        .score-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.95));
            border: 1px solid var(--accent-color); border-radius: 20px; padding: 40px;
            text-align: center; margin-bottom: 30px; position: relative; overflow: hidden;
            box-shadow: 0 0 40px rgba(56, 189, 248, 0.2);
        }
        .score-val { 
            font-size: 5.5rem; font-weight: bold; color: #fff; 
            text-shadow: 0 0 30px rgba(56, 189, 248, 0.6); line-height: 1; margin: 15px 0; 
        }
        .score-msg { font-size: 1.8rem; color: var(--accent-color); font-weight: bold; margin-bottom: 10px; }
        
        .sub-metrics {
            display: flex; justify-content: center; gap: 40px; margin-top: 30px; flex-wrap: wrap;
        }
        .metric-item { text-align: center; }
        .metric-label { font-size: 0.9rem; color: #94A3B8; margin-bottom: 5px; display: block; }
        .metric-value { font-size: 1.4rem; font-weight: bold; color: #fff; }

        .personality-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .personality-card { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; position: relative; }
        .personality-card.me { border-left: 4px solid var(--accent-color); }
        .personality-card.ex { border-left: 4px solid var(--danger-color); }
        
        .p-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .p-name { font-size: 1.3rem; font-weight: bold; color: #fff; }
        .p-ilju { font-size: 0.9rem; color: #94A3B8; background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 5px; }
        
        .tag-container { display: flex; flex-wrap: wrap; gap: 8px; }
        .p-tag { 
            font-size: 0.85rem; padding: 4px 10px; border-radius: 20px; font-weight: bold; 
            background: rgba(255,255,255,0.05); color: #CBD5E1; border: 1px solid rgba(255,255,255,0.1);
        }
        .p-tag.highlight { color: var(--highlight-color); border-color: var(--highlight-color); }

        .detail-card {
            background: var(--panel-bg); border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 15px; padding: 40px; margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: 0.3s;
        }
        .detail-card:hover { border-color: var(--highlight-color); }

        .card-header { display: flex; align-items: center; margin-bottom: 25px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }
        .header-icon { font-size: 1.8rem; margin-right: 15px; }
        .header-title { font-size: 1.5rem; font-weight: bold; color: var(--accent-color); }
        
        .analysis-text { font-size: 1.05rem; color: #E2E8F0; line-height: 1.9; text-align: justify; word-break: keep-all; }
        .analysis-text p { margin-bottom: 20px; }

        .highlight-blue { color: #38BDF8; font-weight: bold; }
        .highlight-red { color: #F43F5E; font-weight: bold; }
        .highlight-gold { color: #FBBF24; font-weight: bold; }

        .timing-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .timing-box { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; text-align: center; }
        .t-label { color: #94A3B8; font-size: 0.9rem; }
        .t-val { font-size: 1.3rem; font-weight: bold; color: #FBBF24; margin-top: 5px; }

        .solution-list { list-style: none; padding: 0; }
        .solution-item { 
            margin-bottom: 20px; padding: 20px; background: rgba(0,0,0,0.2); 
            border-left: 3px solid var(--accent-color); border-radius: 0 10px 10px 0; 
        }
        .sol-head { display: block; color: var(--accent-color); font-weight: bold; font-size: 1.1rem; margin-bottom: 8px; }
        .sol-body { color: #CBD5E1; font-size: 1rem; }

        /* --- [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ ë¡œì§] ë°˜ì‘í˜• (768px ì´í•˜) --- */
        @media (max-width: 768px) {
            header { padding: 0 20px; height: 60px; }
            .logo img { height: 28px; }

            /* 1. ìƒë‹¨ ë©”ë‰´ ìˆ¨ê¸°ê³  í–„ë²„ê±° ë³´ì´ê¸° */
            .top-menu { display: none; }
            .hamburger-btn { display: flex; }

            /* 2. ì‚¬ì´ë“œë°” ìˆ¨ê¸°ê¸° (left: -260px) */
            .sidebar { left: -260px; width: 250px; top: 60px; height: calc(100vh - 60px); }
            
            /* 3. ì‚¬ì´ë“œë°” ì—´ë¦¼ ìƒíƒœ (.open í´ë˜ìŠ¤) */
            .sidebar.open { left: 0; }

            /* 4. ë©”ì¸ ì˜ì—­ ì—¬ë°± ì œê±° (ì‚¬ì´ë“œë°”ê°€ ì—†ìœ¼ë¯€ë¡œ) */
            main { margin-left: 0; margin-top: 60px; padding: 20px; }
            
            /* 5. ì˜¤ë²„ë ˆì´ ì¡°ì • */
            .overlay { top: 60px; height: calc(100vh - 60px); }

            /* ê¸°íƒ€ ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
            .couple-grid { grid-template-columns: 1fr; gap: 40px; }
            .vs-badge { padding: 0; height: auto; transform: none; margin: 10px 0; }
            .score-val { font-size: 4rem; }
            .personality-grid { grid-template-columns: 1fr; }
            .timing-grid { grid-template-columns: 1fr; }
            .input-container { padding: 25px 20px; }
        }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo"><img src="img_logo1.png" alt="logo"></a>
        
        <nav class="top-menu">
            <div class="menu-item">
                <span class="menu-title">ìš´ì„¸</span>
                <div class="dropdown-content">
                    <a href="today_fortune.html">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a>
                    <a href="new_year_fortune.html">ì‹ ë…„ ìš´ì„¸</a>
                    <a href="lifetime_fortune.html">í‰ìƒ ìš´ì„¸</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ì‚¬ì£¼</span>
                <div class="dropdown-content">
                    <a href="manse_calendar.html">ì •í†µ ë§Œì„¸ë ¥</a>
                    <a href="traditional_saju.html">ì •í†µ ì‚¬ì£¼</a>
                    <a href="my_saju.html">ë‚´ ì‚¬ì£¼ í’€ì´</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ì—°ì• </span>
                <div class="dropdown-content">
                    <a href="love-fortune.html">í‰ìƒ ì—°ì• ìš´</a>
                    <a href="saju-compatibility.html">ì‚¬ì£¼ ê¶í•©</a>
                    <a href="reunion-saju.html" style="color:var(--accent-color);">ì¬íšŒ ì‚¬ì£¼</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ë„íŒŒë¯¼</span>
                <div class="dropdown-content">
                    <a href="charm-score.html">ë‚´ ì‚¬ì£¼ ë§¤ë ¥</a>
                    <a href="saju-popularity.html">ì‚¬ì£¼ ì¸ê¸°ìš´</a>
                    <a href="dohwasal-check.html">ë„í™”ì‚´ ì§„ë‹¨ê¸°</a>
                    <a href="saju-spotlight.html">ì£¼ëª©ë°›ëŠ” ì‚¬ì£¼</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ë³„ìë¦¬</span>
                <div class="dropdown-content">
                    <a href="weekly-zodiac.html">ì´ë²ˆì£¼ ë³„ìë¦¬</a>
                    <a href="monthly-zodiac.html">ì´ë²ˆë‹¬ ë³„ìë¦¬</a>
                </div>
            </div>
        </nav>

        <div class="hamburger-btn" onclick="toggleSidebar()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <div class="overlay" onclick="toggleSidebar()"></div>

    <aside class="sidebar" id="sidebar">
        <div class="menu-category">
            <span class="category-title">ìš´ì„¸</span>
            <ul class="sub-menu">
                <li><a href="today_fortune.html">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a></li>
                <li><a href="new_year_fortune.html">ì‹ ë…„ ìš´ì„¸</a></li>
                <li><a href="lifetime_fortune.html">í‰ìƒ ìš´ì„¸</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ì‚¬ì£¼</span>
            <ul class="sub-menu">
                <li><a href="manse_calendar.html">ì •í†µ ë§Œì„¸ë ¥</a></li>
                <li><a href="traditional_saju.html">ì •í†µ ì‚¬ì£¼</a></li>
                <li><a href="my_saju.html">ë‚´ ì‚¬ì£¼ í’€ì´</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ì—°ì• </span>
            <ul class="sub-menu">
                <li><a href="love-fortune.html">í‰ìƒ ì—°ì• ìš´</a></li>
                <li><a href="saju-compatibility.html">ì‚¬ì£¼ ê¶í•©</a></li>
                <li><a href="reunion-saju.html" style="color:var(--accent-color);">ì¬íšŒ ì‚¬ì£¼</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ë„íŒŒë¯¼</span>
            <ul class="sub-menu">
                <li><a href="charm-score.html">ë‚´ ì‚¬ì£¼ì˜ ë§¤ë ¥ë„</a></li>
                <li><a href="saju-popularity.html">ì‚¬ì£¼ì— ìˆëŠ” ì¸ê¸°ìš´</a></li>
                <li><a href="dohwasal-check.html">ë„í™”ì‚´ ì§„ë‹¨ê¸°</a></li>
                <li><a href="saju-spotlight.html">ì£¼ëª©ë°›ëŠ” ì‚¬ì£¼</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ë³„ìë¦¬</span>
            <ul class="sub-menu">
                <li><a href="weekly-zodiac.html">ì´ë²ˆì£¼ ë³„ìë¦¬ ìš´ì„¸</a></li>
                <li><a href="monthly-zodiac.html">ì´ë²ˆë‹¬ ë³„ìë¦¬ ìš´ì„¸</a></li>
            </ul>
        </div>
    </aside>

    <main>
        <div class="page-header">
            <h1 class="page-title">ì¬íšŒ ì‚¬ì£¼ ì •ë°€ ì§„ë‹¨</h1>
            <p class="page-desc">ë‹¹ì‹ ì´ ì™œ í—¤ì–´ì¡ŒëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ë‹¤ì‹œ ë§ˆìŒì„ ëŒë¦´ ìˆ˜ ìˆëŠ”ì§€. <br>ì‚¬ì£¼ ë¬¼ìƒë¡ ìœ¼ë¡œ ë¶„ì„í•œ ë‘ ì‚¬ëŒì˜ <strong>ê¸°ì§ˆì  ì¶©ëŒ ì›ì¸</strong>ê³¼ <strong>ë§ì¶¤ ì²˜ì„¸ìˆ </strong>ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
        </div>

        <div class="input-container" id="inputArea">
            <div class="couple-grid">
                <div class="person-box">
                    <span class="person-tag">ë‚´ ì •ë³´ (Me)</span>
                    <div style="margin-top:15px;">
                        <label class="input-label">ì´ë¦„</label>
                        <input type="text" class="input-field" id="name1" placeholder="ë‚´ ì´ë¦„">
                    </div>
                    <div style="margin-top:15px;">
                        <label class="input-label">ìƒë…„ì›”ì¼ (ì–‘ë ¥)</label>
                        <div class="date-grid">
                            <select class="input-field year-select" id="year1"></select>
                            <select class="input-field month-select" id="month1"></select>
                            <select class="input-field day-select" id="day1"></select>
                        </div>
                    </div>
                    <div style="margin-top:15px;">
                        <label class="input-label">íƒœì–´ë‚œ ì‹œê°„</label>
                        <select class="input-field time-select" id="time1"></select>
                    </div>
                </div>

                <div class="vs-badge">âš¡</div>

                <div class="person-box">
                    <span class="person-tag" style="border-color:#94A3B8; color:#E2E8F0;">ìƒëŒ€ë°© ì •ë³´ (Ex)</span>
                    <div style="margin-top:15px;">
                        <label class="input-label">ì´ë¦„</label>
                        <input type="text" class="input-field" id="name2" placeholder="í—¤ì–´ì§„ ì—°ì¸ ì´ë¦„">
                    </div>
                    <div style="margin-top:15px;">
                        <label class="input-label">ìƒë…„ì›”ì¼ (ì–‘ë ¥)</label>
                        <div class="date-grid">
                            <select class="input-field year-select" id="year2"></select>
                            <select class="input-field month-select" id="month2"></select>
                            <select class="input-field day-select" id="day2"></select>
                        </div>
                    </div>
                    <div style="margin-top:15px;">
                        <label class="input-label">íƒœì–´ë‚œ ì‹œê°„ (ëª¨ë¥´ë©´ ì¶”ì •)</label>
                        <select class="input-field time-select" id="time2"></select>
                    </div>
                </div>
            </div>
            <button class="submit-btn" onclick="analyzeReunion()">ì‹¬ì¸µ ì¬íšŒ ë¦¬í¬íŠ¸ í™•ì¸</button>
        </div>

        <div id="result-area">
            
            <div class="score-card">
                <span style="color:#94A3B8; letter-spacing:1px;">ë‘ ë¶„ì˜ ì¬íšŒ ìš´ëª… ì§€ìˆ˜</span>
                <div class="score-val" id="totalScore">0%</div>
                <div class="score-msg" id="scoreMsg"></div>
                
                <div class="sub-metrics">
                    <div class="metric-item">
                        <span class="metric-label">ğŸ’” ë¯¸ë ¨/ì§‘ì°©ë„</span>
                        <span class="metric-value highlight-red" id="longingScore">0%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">ğŸ€ ì˜¤í–‰ ì¡°í™”ë„</span>
                        <span class="metric-value highlight-gold" id="harmonyScore">0%</span>
                    </div>
                </div>
            </div>

            <div class="personality-grid">
                <div class="personality-card me">
                    <div class="p-header">
                        <span class="p-name" id="pName1"></span>
                        <span class="p-ilju" id="pIlju1"></span>
                    </div>
                    <div class="tag-container" id="pTags1"></div>
                </div>
                <div class="personality-card ex">
                    <div class="p-header">
                        <span class="p-name" id="pName2"></span>
                        <span class="p-ilju" id="pIlju2"></span>
                    </div>
                    <div class="tag-container" id="pTags2"></div>
                </div>
            </div>

            <div class="detail-card">
                <div class="card-header">
                    <span class="header-icon">ğŸ”</span>
                    <span class="header-title">ì‚¬ì£¼ë¡œ ë³¸ ì´ë³„ì˜ ê·¼ë³¸ ì›ì¸</span>
                </div>
                <div class="analysis-text" id="causeText"></div>
            </div>

            <div class="detail-card">
                <div class="card-header">
                    <span class="header-icon">ğŸ•°ï¸</span>
                    <span class="header-title">ì¬íšŒ ê³¨ë“ íƒ€ì„ & ì‹¬ë¦¬</span>
                </div>
                <div class="analysis-text" id="psychologyText"></div>
                
                <div class="timing-grid">
                    <div class="timing-box">
                        <span class="t-label">ì—°ë½ìš´ì´ ì—´ë¦¬ëŠ” ë‹¬(Month)</span>
                        <div class="t-val" id="luckyMonth"></div>
                    </div>
                    <div class="timing-box">
                        <span class="t-label">ìƒëŒ€ê°€ ì•½í•´ì§€ëŠ” ì‹œê°„(Time)</span>
                        <div class="t-val" id="luckyTime"></div>
                    </div>
                </div>
            </div>

            <div class="detail-card" style="border-color: var(--highlight-color); background: rgba(15, 23, 42, 0.8);">
                <div class="card-header">
                    <span class="header-icon">ğŸ“œ</span>
                    <span class="header-title">ë§ˆìŠ¤í„°ì˜ ì¬íšŒ ì²˜ì„¸ìˆ </span>
                </div>
                <div id="solutionContent"></div>
            </div>

            <button class="submit-btn" style="background:#1E293B;" onclick="location.reload()">ìƒˆë¡œìš´ ë¶„ì„ í•˜ê¸°</button>
        </div>
    </main>

    <script>
        // [ì¸ë±ìŠ¤ì™€ ë™ì¼í•œ ë¡œì§] í–„ë²„ê±° í† ê¸€ í•¨ìˆ˜
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.overlay');
            const hamburger = document.querySelector('.hamburger-btn');

            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // [ê¸°ì¡´ ì¬íšŒ ë¡œì§ ìœ ì§€]
        window.onload = function() { initSelectors(); };

        function initSelectors() {
            const years = document.querySelectorAll('.year-select');
            const months = document.querySelectorAll('.month-select');
            const days = document.querySelectorAll('.day-select');
            const times = document.querySelectorAll('.time-select');
            const currentYear = new Date().getFullYear();

            years.forEach(s => { for(let i=currentYear; i>=1950; i--) s.add(new Option(i+'ë…„', i)); s.value=1995; });
            months.forEach(s => { for(let i=1; i<=12; i++) s.add(new Option(i+'ì›”', i)); });
            days.forEach(s => { for(let i=1; i<=31; i++) s.add(new Option(i+'ì¼', i)); });
            
            const sajuTimes = [
                {v:0, t:"ìì‹œ (23:30~01:29)"}, {v:2, t:"ì¶•ì‹œ (01:30~03:29)"}, {v:4, t:"ì¸ì‹œ (03:30~05:29)"},
                {v:6, t:"ë¬˜ì‹œ (05:30~07:29)"}, {v:8, t:"ì§„ì‹œ (07:30~09:29)"}, {v:10, t:"ì‚¬ì‹œ (09:30~11:29)"},
                {v:12, t:"ì˜¤ì‹œ (11:30~13:29)"}, {v:14, t:"ë¯¸ì‹œ (13:30~15:29)"}, {v:16, t:"ì‹ ì‹œ (15:30~17:29)"},
                {v:18, t:"ìœ ì‹œ (17:30~19:29)"}, {v:20, t:"ìˆ ì‹œ (19:30~21:29)"}, {v:22, t:"í•´ì‹œ (21:30~23:29)"}
            ];
            times.forEach(s => sajuTimes.forEach(o => s.add(new Option(o.t, o.v))));
        }

        const GAN = {'ç”²':'ëª©','ä¹™':'ëª©','ä¸™':'í™”','ä¸':'í™”','æˆŠ':'í† ','å·±':'í† ','åºš':'ê¸ˆ','è¾›':'ê¸ˆ','å£¬':'ìˆ˜','ç™¸':'ìˆ˜'};
        const ZHI = {'å­':'ìˆ˜','ä¸‘':'í† ','å¯…':'ëª©','å¯':'ëª©','è¾°':'í† ','å·³':'í™”','åˆ':'í™”','æœª':'í† ','ç”³':'ê¸ˆ','é…‰':'ê¸ˆ','æˆŒ':'í† ','äº¥':'ìˆ˜'};
        
        const TRAITS = {
            'ç”²': ["#ë¦¬ë”ì‹­", "#ìì¡´ì‹¬", "#ê³§ì€ì„±ê²©", "#ë‹¨ìˆœí•¨"],
            'ä¹™': ["#ìƒí™œë ¥", "#ìœ ì—°í•¨", "#ëˆê¸°", "#í˜„ì‹¤ì "],
            'ä¸™': ["#ì—´ì •", "#ë‹¤í˜ˆì§ˆ", "#ì†”ì§í•¨", "#ë’¤ëì—†ìŒ"],
            'ä¸': ["#ì„¬ì„¸í•¨", "#ê°ìˆ˜ì„±", "#í—Œì‹ ", "#ì˜ˆë¯¼"],
            'æˆŠ': ["#í¬ìš©ë ¥", "#ë¬´ëšëš", "#ê³ ì§‘", "#ì‹ ë¢°"],
            'å·±': ["#ì‹¤ì†íŒŒ", "#ìê¸°ì‚¬ëŒ", "#í˜„ì‹¤ì£¼ì˜", "#ì˜ì‹¬"],
            'åºš': ["#ê²°ë‹¨ë ¥", "#ì˜ë¦¬", "#ëƒ‰ì •í•¨", "#ì™„ë²½ì£¼ì˜"],
            'è¾›': ["#ê¹”ë”í•¨", "#ì˜ˆë¦¬í•¨", "#ë„ë„í•¨", "#ë¯¸ì ê°ê°"],
            'å£¬': ["#ìœ ì—°í•¨", "#ì§€í˜œ", "#ì†ì„ì•Œìˆ˜ì—†ìŒ", "#ì„ê¸°ì‘ë³€"],
            'ç™¸': ["#ì—¬ë¦¼", "#ììƒí•¨", "#ë¹„ë°€ë§ìŒ", "#ê°ì„±ì "]
        };

        const CAUSE_DB = {
            'ëª©ëª©': "ìì¡´ì‹¬ ëŒ€ê²°: ë‘ ê³ ì§‘ì˜ ì •ë©´ ì¶©ëŒ",
            'ëª©í™”': "ì†Œì§„ëœ ì‚¬ë‘: ë•”ê°ì´ ë‹¤ íƒ€ë²„ë¦° í˜•êµ­",
            'ëª©í† ': "í†µì œì™€ ë°˜ë°œ: ë¿Œë¦¬ê°€ í™ì„ ëš«ìœ¼ë ¤ë‹¤ ìƒê¸´ ê· ì—´",
            'ëª©ê¸ˆ': "ìƒì²˜ë¿ì¸ ë§: ë„ë¼ì— ì°íŒ ë‚˜ë¬´ì˜ ì•„í””",
            'ëª©ìˆ˜': "ê³¼ë„í•œ ê¸°ëŒ€: ë¬¼ì´ ë„˜ì³ ë¿Œë¦¬ê°€ ì©ì€ í˜•êµ­",
            'í™”í™”': "í­ë°œí•œ ê°ì •: ë¬¼ëŸ¬ì„¬ ì—†ëŠ” ë¶ˆê¸¸ì˜ ì „ìŸ",
            'í™”í† ': "ê¶Œíƒœì™€ ì¹¨ë¬µ: ë¶ˆ êº¼ì§„ ìë¦¬ì— ë‚¨ì€ ì¬",
            'í™”ê¸ˆ': "ê°€ì¹˜ê´€ ì¶©ëŒ: ë¶ˆì´ ì‡ ë¥¼ ë…¹ì´ë ¤ëŠ” ê°•ìš”",
            'í™”ìˆ˜': "ê·¹ê³¼ ê·¹: ë¬¼ê³¼ ë¶ˆì˜ ë§Œë‚¨, ì†Œí†µ ë¶ˆê°€",
            'í™”ëª©': "ì§‘ì°©ê³¼ ë¶€ë‹´: ë„ˆë¬´ ëœ¨ê±°ìš´ íƒœì–‘ ì•„ë˜ ë§ˆë¥¸ ë‚˜ë¬´",
            'í† í† ': "ì†Œí†µì˜ ë‹¨ì ˆ: ì‚°ê³¼ ì‚°ì´ ë§ˆì£¼ ë³´ê³  ì¹¨ë¬µí•¨",
            'í† ê¸ˆ': "í‘œí˜„ì˜ ë¶€ì¬: í™ ì†ì— ë¬»í˜€ë²„ë¦° ì§„ì‹¬",
            'í† ìˆ˜': "êµ¬ì†ê³¼ íšŒí”¼: í™ì´ ë¬¼ê¸¸ì„ ë§‰ìœ¼ë ¤ í•œ ë‹µë‹µí•¨",
            'í† ëª©': "ì••ë°•ê°: ë•…ì„ íŒŒê³ ë“œëŠ” ë‚˜ë¬´ì˜ ê³ í†µ",
            'í† í™”': "ê³¼ì‰ ë³´í˜¸: í™ì„ ë„ˆë¬´ ë‹¨ë‹¨í•˜ê²Œ êµ¬ì›Œë²„ë¦° ë¶ˆ",
            'ê¸ˆê¸ˆ': "ë‚ ì¹´ë¡œìš´ ë¹„íŒ: ì¹¼ê³¼ ì¹¼ì˜ ë¶€ë”ªì¹¨",
            'ê¸ˆìˆ˜': "ì°¨ê°€ìš´ ë°©ê´€: ì°¨ê°€ìš´ ê¸ˆì†ì— ë§ºíŒ ë¬¼ë°©ìš¸",
            'ê¸ˆëª©': "ë…¼ë¦¬ì™€ ê°ì„±: ì‡ ê°€ ë‚˜ë¬´ë¥¼ ì¹˜ëŠ” ì•„í””",
            'ê¸ˆí™”': "ìì¡´ì‹¬ ìƒì²˜: ë¶ˆì— ë…¹ê¸° ì‹«ì€ ì‡ ì˜ ë°˜ë°œ",
            'ê¸ˆí† ': "ì§€ë‚˜ì¹œ ì‹ ì¤‘: í™ì— ë¬»íŒ ì‡ ì˜ ë‹µë‹µí•¨",
            'ìˆ˜ìˆ˜': "ìš°ìš¸ì˜ ëŠª: ê¹Šì€ ë¬¼ì†ìœ¼ë¡œ ê°€ë¼ì•‰ì€ ê´€ê³„",
            'ìˆ˜ëª©': "í¬ìƒì˜ ê°•ìš”: ë‚˜ë¬´ë¥¼ ìœ„í•´ ë§ˆë¼ë²„ë¦° ë¬¼",
            'ìˆ˜í™”': "ê°ì • ê¸°ë³µ: êº¼ì§ˆ ë“¯ ë§ ë“¯ ìœ„íƒœë¡œìš´ ë¶ˆì”¨",
            'ìˆ˜í† ': "í˜„ì‹¤ì˜ ë²½: ë¬¼ì˜ íë¦„ì„ ë§‰ì€ ëŒì˜ ì••ë°•",
            'ìˆ˜ê¸ˆ': "ì§‘ì°©ê³¼ ì˜ì¡´: ê°€ë¼ì•‰ëŠ” ë°°ë¥¼ ë¶™ì¡ì€ í˜•êµ­"
        };

        function analyzeReunion() {
            const n1 = document.getElementById('name1').value || 'ë‚˜';
            const n2 = document.getElementById('name2').value || 'ìƒëŒ€';
            const s1 = getSaju(1);
            const s2 = getSaju(2);
            if(!s1 || !s2) return;

            document.getElementById('inputArea').style.display = 'none';
            document.getElementById('result-area').style.display = 'block';
            window.scrollTo(0,0);

            const analysis = calculateData(s1, s2);
            
            animateValue("totalScore", analysis.totalScore, "%");
            animateValue("longingScore", analysis.longingScore, "%");
            animateValue("harmonyScore", analysis.harmonyScore, "%");
            document.getElementById("scoreMsg").innerText = analysis.msg;

            renderPersonalityCard(1, n1, s1);
            renderPersonalityCard(2, n2, s2);

            document.getElementById("causeText").innerHTML = generateCause(n1, n2, s1, s2, analysis);
            document.getElementById("psychologyText").innerHTML = generatePsy(n2, analysis);
            document.getElementById("solutionContent").innerHTML = generateDetailedSolution(n1, n2, s1, s2, analysis);

            setTiming(s2.stem);
        }

        function calculateData(s1, s2) {
            let totalScore = 50, longingScore = 40, harmonyScore = 50;
            const stemPair = GAN[s1.stem] + GAN[s2.stem];
            const branchPair = [s1.branch, s2.branch].sort().join('');

            const wonjin = [['å­','æœª'],['ä¸‘','åˆ'],['å¯…','é…‰'],['å¯','ç”³'],['è¾°','äº¥'],['å·³','æˆŒ']];
            let isWonjin = wonjin.some(p => p.sort().join('') === branchPair);

            if(isWonjin) { totalScore += 30; longingScore += 45; } 
            
            let fillCount = 0;
            for(let k in s1.counts) if(s1.counts[k]===0 && s2.counts[k]>=2) fillCount++;
            if(fillCount > 0) { totalScore += 15; longingScore += 15; harmonyScore += 20; }

            let msg = totalScore >= 80 ? "ìš´ëª…ì˜ ëˆì´ ë‹¨ë‹¨í•©ë‹ˆë‹¤" : (totalScore >= 50 ? "ì•„ì§ ê¸°íšŒëŠ” ìˆìŠµë‹ˆë‹¤" : "ë†“ì•„ì£¼ëŠ” ê²ƒì´ ë‚«ìŠµë‹ˆë‹¤");
            
            return { totalScore, longingScore, harmonyScore, isWonjin, stemPair, msg };
        }

        function renderPersonalityCard(num, name, saju) {
            document.getElementById(`pName${num}`).innerText = name;
            document.getElementById(`pIlju${num}`).innerText = `${saju.ganZhi} ì¼ì£¼`;
            
            const tags = TRAITS[saju.stem] || ["#ì„±ê²©"];
            const container = document.getElementById(`pTags${num}`);
            container.innerHTML = "";
            
            tags.forEach((tag, idx) => {
                const span = document.createElement('span');
                span.className = idx === 0 ? "p-tag highlight" : "p-tag";
                span.innerText = tag;
                container.appendChild(span);
            });
        }

        function generateCause(n1, n2, s1, s2, res) {
            const causeTitle = CAUSE_DB[res.stemPair] || "ë³µí•©ì ì¸ ì„±ê²© ì°¨ì´";
            const myElem = GAN[s1.stem];
            const yourElem = GAN[s2.stem];

            let html = `<p><strong class="highlight-blue">${n1}</strong>ë‹˜ì€ <strong>${myElem}</strong>, <strong class="highlight-red">${n2}</strong>ë‹˜ì€ <strong>${yourElem}</strong>ì˜ ì„±í–¥ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.</p>`;
            html += `<p>ë‘ ë¶„ì˜ ì´ë³„ì€ ì‚¬ì£¼í•™ì ìœ¼ë¡œ <strong>[${causeTitle}]</strong>ì˜ í˜•êµ­ì…ë‹ˆë‹¤. ì„œë¡œê°€ ì•…í•´ì„œê°€ ì•„ë‹ˆë¼, íƒ€ê³ ë‚œ ê¸°ì§ˆì´ ì„œë¡œ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‚¬ë‘ì„ ë§í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>`;
            
            if(res.isWonjin) {
                html += `<p>íŠ¹íˆ ë‘ ë¶„ ì‚¬ì´ì—ëŠ” <strong class="highlight-red">ì›ì§„ì‚´(æ€¨å—”æ®º)</strong>ì´ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” "ë¯¸ì›Œ ì£½ê² ëŠ”ë° ì•ˆ ë³´ë©´ ë³´ê³  ì‹¶ì€" ê¸°ì´í•œ ì• ì¦ì˜ ìƒíƒœë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ì„±ì ìœ¼ë¡œëŠ” í—¤ì–´ì§€ëŠ” ê²Œ ë§ë‹¤ê³  ìƒê°í•˜ë©´ì„œë„ ê°ì •ì ìœ¼ë¡œ ëŠì–´ë‚´ì§€ ëª»í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤.</p>`;
            }
            return html;
        }

        function generatePsy(n2, res) {
            if(res.longingScore >= 70) return `<p>${n2}ë‹˜ì€ í˜„ì¬ <span class="highlight-red">ì‹¬í•œ í›„í­í’</span>ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤. ìì¡´ì‹¬ ë•Œë¬¸ì— ì—°ë½ì„ ëª»í•  ë¿, ë‹¹ì‹ ì˜ SNSë¥¼ ì—¼íƒí•˜ë©° ì—°ë½ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì„ í™•ë¥ ì´ 90% ì´ìƒì…ë‹ˆë‹¤.</p>`;
            if(res.longingScore >= 50) return `<p>${n2}ë‹˜ì€ ê°ì •ì´ ë°˜ë°˜ì…ë‹ˆë‹¤. í•´ë°©ê°ì„ ëŠë¼ë‹¤ê°€ë„ ë¬¸ë“ ë‹¹ì‹ ì˜ ë¹ˆìë¦¬ë¥¼ í¬ê²Œ ëŠë‚ë‹ˆë‹¤. ì§€ê¸ˆ ìê·¹ì„ ì£¼ë©´ ë§ˆìŒì´ í”ë“¤ë¦´ ìˆ˜ ìˆëŠ” 'ê³¨ë“ íƒ€ì„'ì…ë‹ˆë‹¤.</p>`;
            return `<p>${n2}ë‹˜ì€ ì´ë³„ì„ <span class="highlight-blue">ì´ì„±ì ìœ¼ë¡œ ìˆ˜ìš©</span>í–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ê³¼ì˜ ê´€ê³„ë¥¼ ê³¼ê±°ì˜ ì¶”ì–µìœ¼ë¡œ ì •ë¦¬í•˜ê³  ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ë ¤ í•©ë‹ˆë‹¤. ì„£ë¶€ë¥¸ ê°ì • í˜¸ì†ŒëŠ” ì—­íš¨ê³¼ê°€ ë‚©ë‹ˆë‹¤.</p>`;
        }

        function generateDetailedSolution(n1, n2, s1, s2, res) {
            const targetStem = s2.stem;
            const targetElem = GAN[targetStem];
            let html = `<ul class="solution-list">`;

            html += `<li class="solution-item"><span class="sol-head">1. ìƒëŒ€ë°©(${targetElem}) ê³µëµ í•µì‹¬</span><div class="sol-body">`;
            if(targetElem === 'ëª©') {
                html += `${n2}ë‹˜ì€ ìì¡´ì‹¬ì´ ì„¸ê³  ëª…ì˜ˆìš•ì´ ìˆìŠµë‹ˆë‹¤. <strong>"ë„ˆ ì—†ì´ í˜ë“¤ì–´"ë¼ê³  ë§¤ë‹¬ë¦¬ëŠ” ê²ƒì€ ë§¤ë ¥ ì—†ìŠµë‹ˆë‹¤.</strong> ì˜¤íˆë ¤ ë‹¹ì‹ ì´ ìš´ë™ì´ë‚˜ ì¼ë¡œ ë” ë©‹ì ¸ì§„ ëª¨ìŠµì„ ë³´ì—¬ì¤„ ë•Œ, 'ë‚´ê°€ ì‹¤ìˆ˜í–ˆë‚˜?'ë¼ê³  í›„íšŒí•˜ê²Œ ë©ë‹ˆë‹¤. êµ½íˆì§€ ë§ê³  ë‹¹ë‹¹í•˜ê²Œ ë‹¤ê°€ê°€ì„¸ìš”.`;
            } else if(targetElem === 'í™”') {
                html += `${n2}ë‹˜ì€ ì§ì„¤ì ì´ê³  ë¶ˆê°™ì€ ì„±ê²©ì…ë‹ˆë‹¤. <strong>ë°€ë‹¹ì´ë‚˜ ëŒë ¤ ë§í•˜ê¸°ëŠ” ì ˆëŒ€ ê¸ˆë¬¼ì…ë‹ˆë‹¤.</strong> ì¬íšŒë¥¼ ì›í•œë‹¤ë©´ "ë‚˜ ì•„ì§ ë„ˆ ì¢‹ì•„í•´. ë‹¤ì‹œ ë§Œë‚˜ì."ë¼ê³  ëœ¨ê²ê³  ì†”ì§í•˜ê²Œ ë¶€ë”ªí˜€ì•¼ í•©ë‹ˆë‹¤. ê¸´ ê³µë°±ê¸°ë³´ë‹¤ëŠ” ë¹ ë¥¸ íƒ€ì´ë°ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`;
            } else if(targetElem === 'í† ') {
                html += `${n2}ë‹˜ì€ ì‹ ì¤‘í•˜ê³  ì˜ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì—°ë½ì€ ê²½ê³„ì‹¬ë§Œ í‚¤ì›ë‹ˆë‹¤. ì²œì²œíˆ ìŠ¤ë©°ë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. "ì •ë¦¬í•˜ë‹¤ ë„¤ ë¬¼ê±´ì´ ë‚˜ì™”ì–´" ê°™ì€ <strong>í™•ì‹¤í•˜ê³  ì´ì„±ì ì¸ ëª…ë¶„</strong>ì„ ê°€ì§€ê³  ë¶€ë‹´ ì—†ì´ ì ‘ê·¼í•˜ì„¸ìš”. ì‹ ë¢° íšŒë³µì´ ìš°ì„ ì…ë‹ˆë‹¤.`;
            } else if(targetElem === 'ê¸ˆ') {
                html += `${n2}ë‹˜ì€ ëƒ‰ì •í•˜ê³  ë§ºê³  ëŠìŒì´ í™•ì‹¤í•©ë‹ˆë‹¤. ê°ì •ì— í˜¸ì†Œí•˜ë©° ìš¸ê³ ë¶ˆê³ í•˜ëŠ” ê²ƒì€ ìµœì•…ì˜ ìˆ˜ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì™œ í—¤ì–´ì¡ŒëŠ”ì§€, ê·¸ë¦¬ê³  <strong>ê·¸ ë¬¸ì œê°€ ì–´ë–»ê²Œ í•´ê²°ë˜ì—ˆëŠ”ì§€ ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ë“</strong>í•´ì•¼ í•©ë‹ˆë‹¤. ì´ì„±ì ì¸ ëŒ€í™”ë§Œì´ ë§ˆìŒì„ ì—½ë‹ˆë‹¤.`;
            } else if(targetElem === 'ìˆ˜') {
                html += `${n2}ë‹˜ì€ ìƒê°ì´ ë§ê³  ì†ì„ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ì„±ë³´ë‹¤ëŠ” <strong>ê°ì„±ì„ ìê·¹</strong>í•´ì•¼ í•©ë‹ˆë‹¤. ë°¤ ëŠ¦ì€ ì‹œê°„ì´ë‚˜ ë¹„ ì˜¤ëŠ” ë‚ , ì¶”ì–µì´ ê¹ƒë“  ìŒì•…ì´ë‚˜ ì‚¬ì§„ìœ¼ë¡œ ìš°íšŒì ìœ¼ë¡œ ë§ˆìŒì„ ë‘ë“œë¦¬ì„¸ìš”. ê·¸ë“¤ì˜ ê¹Šì€ ì™¸ë¡œì›€ì„ ê±´ë“œë ¤ì•¼ í•©ë‹ˆë‹¤.`;
            }
            html += `</div></li>`;

            html += `<li class="solution-item"><span class="sol-head">2. ${n1}ë‹˜ì˜ í–‰ë™ ì§€ì¹¨</span><div class="sol-body">`;
            if(GAN[s1.stem] === 'í™”' || GAN[s1.stem] === 'ê¸ˆ') {
                html += `ê¸‰í•œ ì„±ê²©ì„ ì£½ì—¬ì•¼ í•©ë‹ˆë‹¤. ë‹¹ì¥ ë‹µì¥ì´ ì—†ë‹¤ê³  í•´ì„œ "ì™œ ì½ì”¹í•´?"ë¼ê³  ë”°ì§€ëŠ” ìˆœê°„ ì¬íšŒëŠ” ëì…ë‹ˆë‹¤. ìƒëŒ€ì˜ ì†ë„ë¥¼ ê¸°ë‹¤ë ¤ì£¼ëŠ” ì¸ë‚´ì‹¬ì´ ì´ë²ˆ ì¬íšŒì˜ ì—´ì‡ ì…ë‹ˆë‹¤.`;
            } else {
                html += `ë„ˆë¬´ ì†ìœ¼ë¡œë§Œ ë™ë™ ì•“ì§€ ë§ˆì„¸ìš”. ìƒëŒ€ë°©ì€ ë‹¹ì‹ ì´ ì•„ë¬´ë ‡ì§€ ì•Šê²Œ ì˜ ì§€ë‚¸ë‹¤ê³  ì˜¤í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ë‹¹í•œ í‹° ë‚´ê¸°ì™€ í‘œí˜„ì´ í•„ìš”í•©ë‹ˆë‹¤.`;
            }
            html += `</div></li>`;

            html += `</ul>`;
            return html;
        }

        function setTiming(targetStem) {
            const elem = GAN[targetStem];
            let m="", t="";
            if(elem==='ëª©') { m="ë´„(2,3ì›”)"; t="ì•„ì¹¨(05~09ì‹œ)"; }
            else if(elem==='í™”') { m="ì—¬ë¦„(5,6ì›”)"; t="ì ì‹¬(11~13ì‹œ)"; }
            else if(elem==='í† ') { m="í™˜ì ˆê¸°"; t="ì˜¤í›„(13~15ì‹œ)"; }
            else if(elem==='ê¸ˆ') { m="ê°€ì„(8,9ì›”)"; t="ì €ë…(17~19ì‹œ)"; }
            else { m="ê²¨ìš¸(11,12ì›”)"; t="ë°¤(21~01ì‹œ)"; }
            document.getElementById('luckyMonth').innerText = m;
            document.getElementById('luckyTime').innerText = t;
        }

        function getSaju(n) {
            const y=document.getElementById(`year${n}`).value, m=document.getElementById(`month${n}`).value, d=document.getElementById(`day${n}`).value, h=document.getElementById(`time${n}`).value;
            if(typeof Solar==='undefined') return null;
            const solar = Solar.fromYmdHms(parseInt(y),parseInt(m),parseInt(d),parseInt(h),0,0);
            const lunar = Lunar.fromSolar(solar);
            const bazi = lunar.getEightChar();
            return { stem: bazi.getDay().charAt(0), branch: bazi.getDay().charAt(1), ganZhi: bazi.getDay(), counts: getCounts(bazi) };
        }
        function getCounts(b) {
            const c={'ëª©':0,'í™”':0,'í† ':0,'ê¸ˆ':0,'ìˆ˜':0}, s=[b.getYear(),b.getMonth(),b.getDay(),b.getTime()].join('');
            for(let char of s) { let e=GAN[char]||ZHI[char]; if(e) c[e]++; }
            return c;
        }
        function animateValue(id, end, unit) {
            let start = 0; const el = document.getElementById(id);
            const timer = setInterval(() => { start++; el.innerText = start + unit; if(start >= end) clearInterval(timer); }, 10);
        }
    </script>
</body>
</html>