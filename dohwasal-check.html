<!DOCTYPE html>
<html lang="ko">
<head>
     <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-5522499110435321">
<link rel="icon" href="/favicon.png" type="image/png">
    <title>ìš´ì  ë„í™”ì‚´ ì •ë°€ ì§„ë‹¨ê¸°</title>
    <meta name="description" content="ìš´ì  ë„í™”ì‚´ ì •ë°€ ì§„ë‹¨ê¸°">
<meta name="keywords" content="ìš´ì , ì‚¬ì£¼, ë¬´ë£Œì‚¬ì£¼, ì˜¤ëŠ˜ì˜ìš´ì„¸, ìš´ì ìš´ì„¸, ë¬´ë£Œê¶í•©, ì‹ ë…„ìš´ì„¸, ë³‘ì˜¤ë…„ìš´ì„¸, ì •í†µë§Œì„¸ë ¥, ìš´ì ë§Œì„¸ë ¥, ë¬´ë£Œë§Œì„¸ë ¥, ë§Œì„¸ë ¥í™•ì¸, ë¬´ë£Œì‚¬ì£¼í’€ì´, ì •í†µì‚¬ì£¼, ìš´ì ì •í†µì‚¬ì£¼, ë„í™”ì‚´ì§„ë‹¨, ìš´ì ë„í™”ì‚´ì§„ë‹¨, ìš´ì í‰ìƒìš´ì„¸, ìš´ì ë³„ìë¦¬ìš´ì„¸, ìš´ì ì‚¬ì£¼, ìš´ì ì‚¬ì£¼í’€ì´">
    <meta property="og:type" content="website"> 
    <meta property="og:title" content="ìš´ì  ë„í™”ì‚´ ì •ë°€ ì§„ë‹¨ê¸°">
    <meta property="og:description" content="ìš´ì  ë„í™”ì‚´ ì •ë°€ ì§„ë‹¨ê¸°">
    <meta property="og:url" content="https://unjum.co.kr/dohwasal-check">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.6.12/lunar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #831843;       /* ë©”ì¸: ë²„ê±´ë”” */
            --bg-sidebar: #9d174d;    /* ì‚¬ì´ë“œë°” */
            --gold: #f472b6;          /* í¬ì¸íŠ¸: í•«í•‘í¬ */
            --text-main: #1f2937;
            --text-gray: #4b5563;
            --bg-paper: #fff1f2;      /* ì¢…ì´: ì—°í•œ í•‘í¬ */
            
            --font-serif: 'Nanum Myeongjo', serif;
            --font-sans: 'Noto Sans KR', sans-serif;
            --sidebar-w: 260px;
            --header-h: 70px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-serif);
            background-color: #fdf2f8;
            color: var(--text-main);
            line-height: 1.8;
            font-size: 16px;
            overflow-x: hidden;
            word-break: keep-all;
        }

        /* ë¡œë”© ìŠ¤í¬ë¦° */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 9999; display: none;
            flex-direction: column; justify-content: center; align-items: center;
            color: var(--gold);
        }
        .spinner {
            width: 60px; height: 60px; border: 5px solid #be185d;
            border-top: 5px solid var(--gold); border-radius: 50%;
            animation: spin 1.2s infinite linear; margin-bottom: 20px;
        }
        @keyframes spin { 100% {transform: rotate(360deg);} }

        /* --- [í—¤ë” ë° ë„¤ë¹„ê²Œì´ì…˜] --- */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--header-h);
            background-color: var(--bg-dark); display: flex; justify-content: space-between;
            align-items: center; padding: 0 20px; z-index: 1000;
            border-bottom: 2px solid var(--gold);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .logo img { height: 40px; width: auto; }

        /* [PCìš©] ìƒë‹¨ ë©”ë‰´ */
        .top-menu { display: flex; gap: 30px; height: 100%; align-items: center; }
        .menu-item { position: relative; height: 100%; display: flex; align-items: center; cursor: pointer; }
        .menu-title { color: #fff; text-decoration: none; font-size: 1.05rem; transition: 0.3s; white-space: nowrap; font-family: var(--font-sans); font-weight: 500; }
        .menu-item:hover .menu-title { color: var(--gold); }

        /* [PCìš©] ë“œë¡­ë‹¤ìš´ */
        .dropdown-content {
            display: none; position: absolute; top: 70px; left: 50%; transform: translateX(-50%);
            background-color: var(--bg-dark); min-width: 160px; box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            border: 1px solid var(--gold); border-radius: 0 0 10px 10px; z-index: 1001; flex-direction: column; padding: 10px 0;
        }
        .dropdown-content a { color: #fff; padding: 12px 16px; text-decoration: none; display: block; font-size: 0.95rem; text-align: center; font-family: var(--font-sans); }
        .dropdown-content a:hover { background-color: #9d174d; color: var(--gold); }
        @media (min-width: 769px) { .menu-item:hover .dropdown-content { display: flex; } }

        /* [ëª¨ë°”ì¼ìš©] í–„ë²„ê±° ë²„íŠ¼ */
        .hamburger-btn {
            display: none; flex-direction: column; justify-content: space-between;
            width: 30px; height: 21px; cursor: pointer; z-index: 1100;
        }
        .hamburger-btn span {
            display: block; width: 100%; height: 3px;
            background-color: var(--gold); border-radius: 3px; transition: all 0.3s ease;
        }
        .hamburger-btn.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
        .hamburger-btn.active span:nth-child(2) { opacity: 0; }
        .hamburger-btn.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }

        /* [ì‚¬ì´ë“œë°”] */
        aside.sidebar {
            position: fixed; top: var(--header-h); left: 0; width: var(--sidebar-w);
            height: calc(100vh - var(--header-h)); background-color: var(--bg-sidebar);
            padding: 20px; overflow-y: auto; border-right: 1px solid #831843; z-index: 1050;
            transition: left 0.3s ease-in-out;
        }
        
        .category-title { font-size: 1.1rem; color: var(--gold); margin-bottom: 10px; display: block; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; font-family: var(--font-sans); font-weight: 700; margin-top:20px; }
        .sub-menu { list-style: none; padding-left: 5px; margin-bottom: 25px; }
        .sub-menu li { margin: 8px 0; }
        .sub-menu a { color: #fbcfe8; text-decoration: none; font-size: 0.95rem; transition: 0.2s; font-family: var(--font-sans); }
        .sub-menu a:hover { color: #fff; padding-left: 5px; font-weight:bold; }

        /* [ëª¨ë°”ì¼ìš©] ì˜¤ë²„ë ˆì´ */
        .overlay {
            display: none; position: fixed; top: var(--header-h); left: 0;
            width: 100%; height: calc(100vh - var(--header-h));
            background-color: rgba(0, 0, 0, 0.5); z-index: 1040; opacity: 0; transition: opacity 0.3s ease;
        }
        .overlay.active { display: block; opacity: 1; }

        /* [ë©”ì¸ ì˜ì—­] */
        main {
            margin-top: var(--header-h);
            margin-left: var(--sidebar-w);
            padding: 40px;
            min-height: 100vh; display: flex; flex-direction: column; align-items: center;
            transition: margin-left 0.3s ease;
        }

        /* --- ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ --- */
        .input-panel {
            background: #fff; padding: 30px 20px; border-radius: 12px;
            box-shadow: 0 4px 15px rgba(131, 24, 67, 0.08); border: 1px solid #fbcfe8;
            margin-bottom: 30px; width: 100%; max-width: 800px;
        }
        .panel-h1 { text-align: center; font-size: 1.8rem; font-weight: 800; margin-bottom: 10px; color: var(--bg-dark); letter-spacing: -1px; }
        .panel-sub { text-align: center; color: #db2777; font-family: var(--font-sans); margin-bottom: 30px; font-size: 0.95rem; }
        
        .form-row { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 700; margin-bottom: 8px; font-family: var(--font-sans); color: var(--bg-dark); font-size: 1rem; }
        
        /* ì…ë ¥ ê·¸ë£¹ (PCìš© ê°€ë¡œ ë°°ì¹˜) */
        .input-group { display: flex; gap: 8px; }
        
        input, select { 
            flex: 1; padding: 14px; border: 1px solid #f9a8d4; 
            font-size: 1rem; font-family: var(--font-sans); 
            background: #fff; border-radius: 6px; 
            -webkit-appearance: none;
        }
        .btn-option { 
            flex: 1; padding: 14px; border: 1px solid #f9a8d4; background: #fce7f3; cursor: pointer; text-align: center; 
            font-family: var(--font-sans); font-weight: 600; color: #be185d; border-radius: 6px; font-size: 0.95rem;
        }
        .btn-option.selected { background: var(--bg-dark); color: #fff; border-color: var(--bg-dark); }
        
        .btn-analyze { 
            width: 100%; padding: 18px; background: linear-gradient(135deg, #db2777, #be185d); 
            color: #fff; font-size: 1.2rem; font-weight: 800; border: none; cursor: pointer; 
            margin-top: 20px; font-family: var(--font-sans); border-radius: 8px; 
            box-shadow: 0 5px 15px rgba(219, 39, 119, 0.3); 
        }

        /* --- [ë°˜ì‘í˜• í•µì‹¬] 768px ì´í•˜ ëª¨ë°”ì¼ ì„¤ì • --- */
        @media (max-width: 768px) {
            header { padding: 0 20px; height: 60px; }
            
            /* ë©”ë‰´ ìˆ¨ê¸°ê³  í–„ë²„ê±° ë³´ì´ê¸° */
            .top-menu { display: none; }
            .hamburger-btn { display: flex; }

            /* ì‚¬ì´ë“œë°” ìˆ¨ê¹€ */
            aside.sidebar { left: -270px; top: 60px; height: calc(100vh - 60px); }
            aside.sidebar.open { left: 0; }
            .overlay { top: 60px; height: calc(100vh - 60px); }

            /* ë©”ì¸ ì˜ì—­ ì—¬ë°± ì œê±° */
            main { margin-left: 0; padding: 20px; margin-top: 60px; }
            
            /* í°íŠ¸ ë° íŒ¨ë”© ì¡°ì • */
            .panel-h1 { font-size: 1.5rem; }
            .input-panel { padding: 25px 15px; }

            /* [ì¤‘ìš”] ëª¨ë°”ì¼ì—ì„œ ì…ë ¥ì°½ ì„¸ë¡œë¡œ ìŒ“ê¸° (ë²„íŠ¼ íŠ€ì–´ë‚˜ì˜´ ë°©ì§€) */
            .input-group { flex-direction: column; gap: 10px; }
            
            /* ì„±ë³„/ì–‘ìŒë ¥ ë²„íŠ¼ì´ ìˆëŠ” ë‚´ë¶€ divëŠ” ê°€ë¡œ ìœ ì§€í•˜ë˜ ë²„íŠ¼ì€ ê½‰ ì°¨ê²Œ */
            .input-group > div[style*="display:flex"] { width: 100%; }
        }

        /* ê²°ê³¼ì§€ ìŠ¤íƒ€ì¼ */
        #result-area { display: none; width: 100%; max-width: 800px; }
        .paper { 
            background: #fff; padding: 40px 20px;
            margin-bottom: 50px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); 
            border: 1px solid #fbcfe8; border-top: 6px solid var(--gold); 
        }
        .rpt-head { text-align: center; border-bottom: 3px double #fbcfe8; padding-bottom: 20px; margin-bottom: 40px; }
        .rpt-title { font-size: 2.2rem; font-weight: 900; color: var(--bg-dark); margin-bottom: 10px; line-height: 1.2; }
        .rpt-meta { font-family: var(--font-sans); color: var(--text-gray); font-size: 0.9rem; }
        .badge { background: #831843; color: #fff; padding: 3px 8px; font-size: 0.8rem; font-weight: bold; margin-left: 5px; border-radius: 3px; vertical-align: middle; }

        /* ì›êµ­í‘œ */
        .wonkuk-wrapper { margin-bottom: 40px; display: flex; justify-content: space-between; gap: 5px; }
        .pillar-box { 
            flex: 1; border: 1px solid #fbcfe8; border-radius: 8px; overflow: hidden; 
            display: flex; flex-direction: column; text-align: center; 
        }
        .pillar-head { background: var(--bg-dark); color: #fff; font-size: 0.85rem; padding: 8px 0; font-family: var(--font-sans); }
        .pillar-body { background: #fff1f2; padding: 15px 0; flex:1; display:flex; flex-direction: column; justify-content: center; align-items: center; gap: 10px; }
        .char-box { font-size: 1.8rem; font-weight: 900; color: #333; line-height: 1; position: relative; }
        .char-box.dohwa-highlight { color: #db2777; transform: scale(1.15); transition: 0.3s; text-shadow: 0 0 10px rgba(219,39,119,0.3); }
        .char-box.dohwa-highlight::after { content: 'ğŸŒ¸'; font-size: 0.5em; position: absolute; top: -8px; right: -8px; }

        /* ê²°ê³¼ ë°•ìŠ¤ */
        .verdict-box { 
            text-align: center; padding: 30px 20px; background: var(--bg-dark); color: #fff; 
            border-radius: 12px; margin-bottom: 30px; box-shadow: 0 10px 25px rgba(131, 24, 67, 0.2);
        }
        .verdict-main { font-size: 2.0rem; font-weight: 900; letter-spacing: -1px; margin-bottom: 10px; line-height: 1.2; }
        .verdict-desc { font-size: 1rem; color: #fbcfe8; font-weight: 500; font-family: var(--font-sans); }

        .card { 
            background: #fff; border: 1px solid #fce7f3; padding: 25px; 
            margin-bottom: 30px; border-left: 5px solid var(--gold); 
            box-shadow: 2px 2px 15px rgba(0,0,0,0.03); 
        }
        .card-title { font-family: var(--font-sans); font-size: 1.2rem; font-weight: 800; color: var(--bg-dark); margin-bottom: 15px; display: flex; align-items: center; border-bottom: 1px dashed #f9a8d4; padding-bottom: 10px; }
        .card-title::before { content: 'âœ¿'; color: var(--gold); margin-right: 8px; font-size: 1.0rem; }
        .text-content { font-size: 1.05rem; color: #374151; text-align: justify; line-height: 1.8; }
        .text-content p { margin-bottom: 15px; }

        /* íŠ¹ìˆ˜ ë„í™” ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .special-badge-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
        .d-badge { 
            padding: 6px 12px; border-radius: 20px; font-size: 0.9rem; font-weight: 700; 
            font-family: var(--font-sans); display: inline-flex; align-items: center;
        }
        .d-jin { background: #be185d; color: #fff; border: 1px solid #831843; }
        .d-nache { background: #f472b6; color: #831843; border: 1px solid #db2777; }
        .d-jangnae { background: #4338ca; color: #fff; border: 1px solid #312e81; } 
        .d-jangoe { background: #e11d48; color: #fff; border: 1px solid #9f1239; } 
        .d-hong { background: #db2777; color: #fff; border: 1px solid #be185d; } 

        .float-save-btn { 
            position: fixed; bottom: 30px; right: 20px; 
            background: var(--bg-dark); color: #fff; 
            padding: 15px 30px; border-radius: 50px; 
            font-weight: 800; font-size: 1rem; cursor: pointer; 
            border: 2px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            z-index: 2000; display: none; 
        }

        @media (min-width: 1024px) {
            .paper { padding: 80px; }
            .rpt-title { font-size: 3rem; margin-bottom: 15px; }
            .wonkuk-wrapper { gap: 20px; margin-bottom: 60px; }
            .pillar-box { border-radius: 12px; }
            .pillar-head { font-size: 1rem; padding: 12px 0; }
            .pillar-body { padding: 30px 0; gap: 20px; }
            .char-box { font-size: 2.5rem; }
            .float-save-btn { bottom: 40px; right: 40px; padding: 20px 40px; font-size: 1.2rem; }
            .panel-h1 { font-size: 2.2rem; }
            .input-panel { padding: 50px; }
        }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="spinner"></div>
        <div style="font-size:1.3rem; font-weight:800; letter-spacing: 2px; margin-bottom:10px;">VVIP PREMIUM AI</div>
        <div style="font-family:'Noto Sans KR'; color:#fbcfe8; text-align:center; font-size:0.9rem;">ì§„ë„í™”, ë‚˜ì²´ë„í™”, í™ì—¼ì‚´ê¹Œì§€<br>ëª¨ë“  ë§¤ë ¥ ì¸ìë¥¼ ì •ë°€ ìŠ¤ìº” ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>

    <header>
        <a href="index.html" class="logo"><img src="img_logo1.png" alt="logo"></a>

        <nav class="top-menu">
            <div class="menu-item">
                <span class="menu-title">ìš´ì„¸</span>
                <div class="dropdown-content">
                    <a href="today_fortune.html">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a>
                    <a href="new_year_fortune.html">ì‹ ë…„ ìš´ì„¸</a>
                    <a href="lifetime_fortune.html">í‰ìƒ ìš´ì„¸</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ì‚¬ì£¼</span>
                <div class="dropdown-content">
                    <a href="manse_calendar.html">ì •í†µ ë§Œì„¸ë ¥</a>
                    <a href="traditional_saju.html">ì •í†µ ì‚¬ì£¼</a>
                    <a href="my_saju.html">ë‚´ ì‚¬ì£¼ í’€ì´</a>
                                <a href="positive-saju.html">ì¢‹ì€ ë§ë§Œ í•˜ëŠ” ì‚¬ì£¼</a>
                    <a href="negative-saju.html">ë‚˜ìœ ë§ë§Œ í•˜ëŠ” ì‚¬ì£¼</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ì—°ì• </span>
                <div class="dropdown-content">
                    <a href="love-fortune.html">í‰ìƒ ì—°ì• ìš´</a>
                    <a href="saju-compatibility.html">ì‚¬ì£¼ ê¶í•©</a>
                    <a href="reunion-saju.html">ì¬íšŒ ì‚¬ì£¼</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ë„íŒŒë¯¼</span>
                <div class="dropdown-content">
                    <a href="charm-score.html">ë‚´ ì‚¬ì£¼ ë§¤ë ¥</a>
                    <a href="saju-popularity.html">ì‚¬ì£¼ ì¸ê¸°ìš´</a>
                    <a href="dohwasal-check.html">ë„í™”ì‚´ ì§„ë‹¨ê¸°</a>
                    <a href="saju-spotlight.html">ì£¼ëª©ë°›ëŠ” ì‚¬ì£¼</a>
                </div>
            </div>
            <div class="menu-item">
                <span class="menu-title">ë³„ìë¦¬</span>
                <div class="dropdown-content">
                    <a href="weekly-zodiac.html">ì´ë²ˆì£¼ ë³„ìë¦¬</a>
                    <a href="monthly-zodiac.html">ì´ë²ˆë‹¬ ë³„ìë¦¬</a>
                </div>
            </div>
        </nav>

        <div class="hamburger-btn" onclick="toggleSidebar()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <div class="overlay" onclick="toggleSidebar()"></div>

    <aside class="sidebar" id="sidebar">
        <div class="menu-category">
            <span class="category-title">ìš´ì„¸</span>
            <ul class="sub-menu">
                <li><a href="today_fortune.html">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a></li>
                <li><a href="new_year_fortune.html">ì‹ ë…„ ìš´ì„¸</a></li>
                <li><a href="lifetime_fortune.html">í‰ìƒ ìš´ì„¸</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ì‚¬ì£¼</span>
            <ul class="sub-menu">
                <li><a href="manse_calendar.html">ì •í†µ ë§Œì„¸ë ¥</a></li>
                <li><a href="traditional_saju.html">ì •í†µ ì‚¬ì£¼</a></li>
                <li><a href="my_saju.html">ë‚´ ì‚¬ì£¼ í’€ì´</a></li>
                            <li><a href="positive-saju.html">ì¢‹ì€ ë§ë§Œ í•˜ëŠ” ì‚¬ì£¼</a></li>
        <li><a href="negative-saju.html">ë‚˜ìœ ë§ë§Œ í•˜ëŠ” ì‚¬ì£¼</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ì—°ì• </span>
            <ul class="sub-menu">
                <li><a href="love-fortune.html">í‰ìƒ ì—°ì• ìš´</a></li>
                <li><a href="saju-compatibility.html">ì‚¬ì£¼ ê¶í•©</a></li>
                <li><a href="reunion-saju.html">ì¬íšŒ ì‚¬ì£¼</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ë„íŒŒë¯¼</span>
            <ul class="sub-menu">
                <li><a href="charm-score.html">ë‚´ ì‚¬ì£¼ì˜ ë§¤ë ¥ë„</a></li>
                <li><a href="saju-popularity.html">ì‚¬ì£¼ì— ìˆëŠ” ì¸ê¸°ìš´</a></li>
                <li><a href="dohwasal-check.html" style="color:#fff; font-weight:bold;">ë„í™”ì‚´ ì§„ë‹¨ê¸°</a></li>
                <li><a href="saju-spotlight.html">ì£¼ëª©ë°›ëŠ” ì‚¬ì£¼</a></li>
            </ul>
        </div>
        <div class="menu-category">
            <span class="category-title">ë³„ìë¦¬</span>
            <ul class="sub-menu">
                <li><a href="weekly-zodiac.html">ì´ë²ˆì£¼ ë³„ìë¦¬ ìš´ì„¸</a></li>
                <li><a href="monthly-zodiac.html">ì´ë²ˆë‹¬ ë³„ìë¦¬ ìš´ì„¸</a></li>
            </ul>
        </div>
    </aside>

    <main>
        <div class="input-panel" id="input-form-area">
            <h1 class="panel-h1">ë„í™”ì‚´(æ¡ƒèŠ±æ®º) ì¢…í•© ì§„ë‹¨</h1>
            <p class="panel-sub">ì§„ë„í™”, ë‚˜ì²´ë„í™”, í™ì—¼ì‚´ ë“± ëª¨ë“  ë§¤ë ¥ ì¸ìë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.</p>
            
            <div class="form-row">
                <label class="form-label">ì„±ëª… ë° ì„±ë³„</label>
                <div class="input-group">
                    <input type="text" id="user-name" placeholder="ì´ë¦„ ì…ë ¥">
                    <div style="display:flex; flex:1; gap:5px;">
                        <div id="btn-male" class="btn-option selected" onclick="ui.setGender('m')">ë‚¨ì„±</div>
                        <div id="btn-female" class="btn-option" onclick="ui.setGender('f')">ì—¬ì„±</div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <label class="form-label">ìƒë…„ì›”ì¼</label>
                <div class="input-group">
                    <select id="sel-year"></select>
                    <select id="sel-month"></select>
                    <select id="sel-day"></select>
                </div>
                <div class="input-group" style="margin-top:8px;">
                    <div id="btn-solar" class="btn-option selected" onclick="ui.setCal('solar')">ì–‘ë ¥</div>
                    <div id="btn-lunar" class="btn-option" onclick="ui.setCal('lunar')">ìŒë ¥</div>
                </div>
            </div>
            <div class="form-row">
                <label class="form-label">íƒœì–´ë‚œ ì‹œê°„</label>
                <select id="sel-hour">
                    <option value="0">ìì‹œ (23:30 ~ 01:29)</option>
                    <option value="2">ì¶•ì‹œ (01:30 ~ 03:29)</option>
                    <option value="4">ì¸ì‹œ (03:30 ~ 05:29)</option>
                    <option value="6">ë¬˜ì‹œ (05:30 ~ 07:29)</option>
                    <option value="8">ì§„ì‹œ (07:30 ~ 09:29)</option>
                    <option value="10">ì‚¬ì‹œ (09:30 ~ 11:29)</option>
                    <option value="12">ì˜¤ì‹œ (11:30 ~ 13:29)</option>
                    <option value="14">ë¯¸ì‹œ (13:30 ~ 15:29)</option>
                    <option value="16">ì‹ ì‹œ (15:30 ~ 17:29)</option>
                    <option value="18">ìœ ì‹œ (17:30 ~ 19:29)</option>
                    <option value="20">ìˆ ì‹œ (19:30 ~ 21:29)</option>
                    <option value="22">í•´ì‹œ (21:30 ~ 23:29)</option>
                </select>
            </div>
            <button class="btn-analyze" onclick="app.analyze()">ğŸŒ¸ ì¢…í•© ì§„ë‹¨ ì‹œì‘</button>
        </div>

        <div id="result-area">
            <div class="paper" id="print-target">
                <div class="rpt-head">
                    <h1 class="rpt-title">Full Peach Blossom Report</h1>
                    <div class="rpt-meta">ìˆ˜ì‹ ì¸: <strong id="res-name"></strong> ë‹˜ | ë§¤ë ¥ì‚´ ì¢…í•© ì •ë°€ ë¶„ì„</div>
                </div>

                <div class="wonkuk-wrapper" id="wonkuk-display"></div>

                <div class="verdict-box">
                    <div class="verdict-main" id="res-verdict"></div>
                    <div class="verdict-desc" id="res-verdict-desc"></div>
                </div>

                <div id="dohwa-details"></div>

                <div class="card" style="border-left: 5px solid #831843; background:#fff1f2;">
                    <div class="card-title" style="color:#831843;">ë§ˆìŠ¤í„°ì˜ ë„í™” ì†”ë£¨ì…˜</div>
                    <div class="text-content" id="res-advice"></div>
                </div>
            </div>
        </div>
    </main>

    <button class="float-save-btn" id="btn-save" onclick="app.saveImage()">ğŸ“¥ ë¦¬í¬íŠ¸ ì €ì¥</button>

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.querySelector('.overlay');
        const hamburger = document.querySelector('.hamburger-btn');

        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
        hamburger.classList.toggle('active');
    }

/**
 * [DOHWA DATABASE]
 * ì„¤ëª… ë°ì´í„°ë¥¼ ì•„ì£¼ ìƒì„¸í•˜ê²Œ í™•ì¥í–ˆìŠµë‹ˆë‹¤.
 */
const DB_DOHWA_BASIC = {
    "å­": { 
        name: "ììˆ˜ ë„í™” (ë°¤ì˜ ë„í™”)", 
        desc: "ê¹Šì€ ë°¤ì˜ ì •ì ì²˜ëŸ¼ ì€ë°€í•˜ê³  ì‹ ë¹„ë¡œìš´ ë§¤ë ¥ì…ë‹ˆë‹¤. ëŒ€ë†“ê³  ë“œëŸ¬ë‚´ì§€ ì•Šì•„ë„ ë¬˜í•˜ê²Œ ì‚¬ëŒì„ ëŒì–´ë‹¹ê¸°ëŠ” 'ì§€ì ì¸ ì„¹ì‹œí•¨'ê³¼ 'ì²­ì´ˆí•¨'ì„ ë™ì‹œì— ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìƒê°ì´ ê¹Šê³  ì°¨ë¶„í•´ ë³´ì´ì§€ë§Œ, ë‚´ë©´ì—ëŠ” ëœ¨ê±°ìš´ ì• ì • ìš•êµ¬ì™€ ì—´ì •ì´ ìˆ¨ì–´ ìˆì–´ ë°˜ì „ ë§¤ë ¥ì„ ì„ ì‚¬í•©ë‹ˆë‹¤. ë‹¤ë§Œ, ë„ˆë¬´ ë¹„ë°€ìŠ¤ëŸ¬ì›Œ ì†ì„ ì•Œ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤í•´ë¥¼ ë°›ê±°ë‚˜, ë‚¨ëª¨ë¥´ëŠ” ì• ì •ì‚¬ë‚˜ ë¹„ë°€ ì—°ì• ê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ìœ í˜•ì…ë‹ˆë‹¤." 
    },
    "åˆ": { 
        name: "ì˜¤í™” ë„í™” (ë‚®ì˜ ë„í™”)", 
        desc: "í•œë‚®ì˜ íƒœì–‘ì²˜ëŸ¼ í™”ë ¤í•˜ê³  ì •ì—´ì ì¸ ë§¤ë ¥ì…ë‹ˆë‹¤. ìˆ¨ê¸°ë ¤ í•´ë„ ëˆˆì— ëŒ ìˆ˜ë°–ì— ì—†ìœ¼ë©°, ì‚¬êµê³„ì˜ ì£¼ì¸ê³µì²˜ëŸ¼ ì–¸ì œë‚˜ ëŒ€ì¤‘ì˜ ì‹œì„ ì„ í•œ ëª¸ì— ë°›ìŠµë‹ˆë‹¤. ì†”ì§í•˜ê³  ê±°ì¹¨ì—†ëŠ” ì„±ê²© ë•ë¶„ì— ì£¼ë³€ì— í•­ìƒ ì‚¬ëŒì´ ëŠì´ì§€ ì•Šìœ¼ë©°, ì—°ì˜ˆì¸ì´ë‚˜ ì¸í”Œë£¨ì–¸ì„œì²˜ëŸ¼ ìì‹ ì„ ë“œëŸ¬ë‚´ëŠ” ì§ì—…ì—ì„œ í¬ê²Œ ë¹›ì„ ë°œí•©ë‹ˆë‹¤. í™”ë ¤í•¨ì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥ì´ ê°•í•´ ì‚¬ì¹˜ë‚˜ ê²‰ì¹˜ë ˆì— ë¹ ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤." 
    },
    "å¯": { 
        name: "ë¬˜ëª© ë„í™” (ë´„ì˜ ë„í™”)", 
        desc: "íŒŒë¦‡íŒŒë¦‡ ë‹ì•„ë‚˜ëŠ” ìƒˆì‹¹ì²˜ëŸ¼ ìˆœìˆ˜í•˜ê³  ê·€ì—¬ìš´ ë§¤ë ¥ì…ë‹ˆë‹¤. ì–´ë¦°ì•„ì´ ê°™ì€ ì²œì§„ë‚œë§Œí•¨ê³¼ ìƒí¼í•¨ìœ¼ë¡œ ìƒëŒ€ë°©ì˜ ë¬´ì¥í•´ì œë¥¼ ìœ ë„í•˜ë©°, ê°•í•œ ë³´í˜¸ ë³¸ëŠ¥ì„ ìê·¹í•©ë‹ˆë‹¤. ì¹œí™”ë ¥ì´ ë›°ì–´ë‚˜ê³  ë‹¤ì •ë‹¤ê°í•˜ì—¬ ëˆ„êµ¬ì—ê²Œë‚˜ ì‚¬ë‘ë°›ëŠ” 'êµ­ë¯¼ ì—¬ë™ìƒ/ë‚¨ë™ìƒ' ê°™ì€ ì´ë¯¸ì§€ë¥¼ ê°€ì§‘ë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜ì¡´ì ì¸ ì„±í–¥ì´ ìˆì–´ í•œ ì‚¬ëŒì—ê²Œ ì§‘ì°©í•˜ê±°ë‚˜, ë°˜ëŒ€ë¡œ ì¤ëŒ€ ì—†ì´ ì´ ì‚¬ëŒ ì € ì‚¬ëŒì—ê²Œ íœ˜ë‘˜ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤." 
    },
    "é…‰": { 
        name: "ìœ ê¸ˆ ë„í™” (ê°€ì„ì˜ ë„í™”)", 
        desc: "ì˜ ì„¸ê³µëœ ë³´ì„ì²˜ëŸ¼ ì°¨ê°‘ê³  ì„¸ë ¨ëœ ë„ì‹œì ì¸ ë§¤ë ¥ì…ë‹ˆë‹¤. ê¹”ë”í•˜ê³  ì™„ë²½ì£¼ì˜ì ì¸ ì„±í–¥ì— ëƒ‰ì² í•œ ì´ë¯¸ì§€ê°€ ë”í•´ì ¸, ì‰½ê²Œ ë‹¤ê°€ê°ˆ ìˆ˜ ì—†ëŠ” 'ê³ ê³ í•œ ë¶„ìœ„ê¸°'ë¥¼ í’ê¹ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„ë„í•¨ì´ ì˜¤íˆë ¤ ì´ì„±ì˜ í˜¸ê¸°ì‹¬ê³¼ ì •ë³µìš•ì„ ê°•í•˜ê²Œ ìê·¹í•©ë‹ˆë‹¤. ë§ê³¼ í–‰ë™ì— ì ˆì œë¯¸ê°€ ìˆê³  ë§ºê³  ëŠìŒì´ í™•ì‹¤í•˜ì—¬, ì¿¨í•˜ê³  ë§¤ë ¥ì ì¸ 'ë‚˜ìœ ë‚¨ì/ì—¬ì' ìŠ¤íƒ€ì¼ë¡œ ë¹„ì¹˜ê¸°ë„ í•©ë‹ˆë‹¤." 
    }
};

const app = {
    // ì§„ë„í™” (ë…„ì§€ ê¸°ì¤€)
    checkJinDohwa: function(yearBranch, targetBranch) {
        if (['äº¥','å¯','æœª'].includes(yearBranch) && targetBranch === 'å­') return true;
        if (['å¯…','åˆ','æˆŒ'].includes(yearBranch) && targetBranch === 'å¯') return true;
        if (['å·³','é…‰','ä¸‘'].includes(yearBranch) && targetBranch === 'åˆ') return true;
        if (['ç”³','å­','è¾°'].includes(yearBranch) && targetBranch === 'é…‰') return true;
        return false;
    },

    // ë‚˜ì²´ë„í™” (ì¼ì£¼ ê¸°ì¤€)
    checkNacheDohwa: function(iljuGan, iljuZhi) {
        // ê°‘ì, ì„ì‚¬, ì •ë¬˜, ê¸°ë¬˜, ê²½ì˜¤, ì‹ í•´, ê³„ìœ  (7ëŒ€ ë‚˜ì²´ë„í™”)
        const nacheList = ["ç”²å­", "ä¹™å·³", "ä¸å¯", "å·±å¯", "åºšåˆ", "è¾›äº¥", "ç™¸é…‰"];
        return nacheList.includes(iljuGan + iljuZhi);
    },

    // í™ì—¼ì‚´ (ì¼ì£¼ ê¸°ì¤€)
    checkHongYeom: function(iljuGan, iljuZhi) {
        // ê°‘ì˜¤, ì„ì‹ , ë³‘ì¸, ì •ë¯¸, ë¬´ì§„, ê¸°ì§„, ê²½ìˆ , ì‹ ìœ , ì„ì, ê³„ì‹ 
        const hongList = ["ç”²åˆ", "ä¹™ç”³", "ä¸™å¯…", "ä¸æœª", "æˆŠè¾°", "å·±è¾°", "åºšæˆŒ", "è¾›é…‰", "å£¬å­", "ç™¸ç”³"];
        return hongList.includes(iljuGan + iljuZhi);
    },

    analyze: function() {
        const name = document.getElementById('user-name').value;
        if(!name) { alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
        
        document.getElementById('loading-screen').style.display = 'flex';

        setTimeout(() => {
            const y = document.getElementById('sel-year').value;
            const m = document.getElementById('sel-month').value;
            const d = document.getElementById('sel-day').value;
            const h = document.getElementById('sel-hour').value;
            
            let lunar;
            try {
                lunar = (ui.calType === 'solar') 
                    ? Solar.fromYmdHms(parseInt(y), parseInt(m), parseInt(d), parseInt(h), 0, 0).getLunar()
                    : Lunar.fromYmdHms(parseInt(y), parseInt(m), parseInt(d), parseInt(h), 0, 0);
            } catch(e) { alert('ë‚ ì§œ ì˜¤ë¥˜'); document.getElementById('loading-screen').style.display = 'none'; return; }

            const eight = lunar.getEightChar();
            // ì‹œ, ì¼, ì›”, ë…„
            const pillars = [
                {g:eight.getTimeGan(), z:eight.getTimeZhi(), name:"ì‹œì£¼(ë§ë…„)"},
                {g:eight.getDayGan(), z:eight.getDayZhi(), name:"ì¼ì£¼(ë³¸ì¸)"},
                {g:eight.getMonthGan(), z:eight.getMonthZhi(), name:"ì›”ì£¼(ì‚¬íšŒ)"},
                {g:eight.getYearGan(), z:eight.getYearZhi(), name:"ë…„ì£¼(ì´ˆë…„)"}
            ];

            const yearBranch = pillars[3].z;
            const dohwaChars = ['å­', 'åˆ', 'å¯', 'é…‰'];
            
            let found = { basic: [], jin: [], nache: false, hong: false, wall: [], garden: [] };
            
            // 1. ë‚˜ì²´ë„í™” & í™ì—¼ì‚´ ì²´í¬ (ì¼ì£¼)
            if(this.checkNacheDohwa(pillars[1].g, pillars[1].z)) found.nache = true;
            if(this.checkHongYeom(pillars[1].g, pillars[1].z)) found.hong = true;

            // 2. ì „ì²´ ìŠ¤ìº”
            let wonkukHTML = "";
            pillars.forEach((p, idx) => {
                let isBasic = dohwaChars.includes(p.z);
                let isJin = this.checkJinDohwa(yearBranch, p.z);
                
                if(isBasic) {
                    found.basic.push(p.z);
                    if(idx === 2 || idx === 3) found.wall.push(p.z); // ì›”,ë…„: ì¥ë‚´(ê³µì )
                    if(idx === 0 || idx === 1) found.garden.push(p.z); // ì‹œ,ì¼: ì¥ì™¸(ì‚¬ì )
                }
                if(isJin) found.jin.push(p.z);

                // í•˜ì´ë¼ì´íŒ…
                let highlightClass = isBasic ? "dohwa-highlight" : "";
                let specialStyle = "";
                if(isJin) specialStyle = "color:#be185d; text-shadow:0 0 15px rgba(190,24,93,0.5);";
                if(idx === 1 && (found.nache || found.hong)) specialStyle = "color:#be185d; border-bottom:2px solid #db2777;";

                wonkukHTML += `
                    <div class="pillar-box">
                        <div class="pillar-head">${p.name}</div>
                        <div class="pillar-body">
                            <span class="char-box">${p.g}</span>
                            <span class="char-box ${highlightClass}" style="${specialStyle}">${p.z}</span>
                        </div>
                    </div>
                `;
            });
            document.getElementById('wonkuk-display').innerHTML = wonkukHTML;
            document.getElementById('res-name').innerText = name;

            // 3. ê²°ê³¼ ë¶„ì„ ë° HTML ìƒì„±
            let detailHTML = "";
            const totalCount = found.basic.length;
            const verdictEl = document.getElementById('res-verdict');
            const descEl = document.getElementById('res-verdict-desc');
            const adviceEl = document.getElementById('res-advice');

            // --- ë±ƒì§€ ë° íŠ¹ìˆ˜ ë„í™” ì„¹ì…˜ ---
            let specialHTML = `<div class="special-badge-container">`;
            let hasSpecial = false;

            if(found.jin.length > 0) {
                specialHTML += `<span class="d-badge d-jin">âœ¨ ì§„ë„í™”(çœæ¡ƒèŠ±) ë°œê²¬!</span>`;
                hasSpecial = true;
            }
            if(found.nache) {
                specialHTML += `<span class="d-badge d-nache">ğŸ’‹ ë‚˜ì²´ë„í™”(è£¸é«”æ¡ƒèŠ±)</span>`;
                hasSpecial = true;
            }
            if(found.hong) {
                specialHTML += `<span class="d-badge d-hong">ğŸ˜Š í™ì—¼ì‚´(ç´…è‰¶æ®º)</span>`;
                hasSpecial = true;
            }
            if(found.wall.length > 0) specialHTML += `<span class="d-badge d-jangnae">ğŸ¢ ì¥ë‚´ë„í™” (ê³µì  ì¸ê¸°)</span>`;
            if(found.garden.length > 0) specialHTML += `<span class="d-badge d-jangoe">ğŸ· ì¥ì™¸ë„í™” (ì‚¬ì  ì¸ê¸°)</span>`;
            
            specialHTML += `</div>`;
            
            // íŠ¹ìˆ˜ ë„í™” ì„¤ëª… (ì„¤ëª… ëŒ€í­ ë³´ê°•)
            if(hasSpecial || found.basic.length > 0) {
                detailHTML += `<div class="card"><div class="card-title">ì¢…í•© ë§¤ë ¥ ì‹¬ì¸µ ë¶„ì„</div>${specialHTML}<div class="text-content">`;
                
                if(found.jin.length > 0) detailHTML += `<p><strong>[ì§„ë„í™”(çœæ¡ƒèŠ±)]:</strong> ê·€í•˜ëŠ” ë‹¨ìˆœíˆ ê¸€ìë§Œ ìˆëŠ” 'ê°€ë„í™”'ê°€ ì•„ë‹Œ, ì‚¬ì£¼ì˜ êµ¬ì„± ìš”ê±´ì´ ì™„ë²½íˆ ë§ì•„ë–¨ì–´ì§€ëŠ” 'ì§„ì§œë°°ê¸° ë„í™”'(${found.jin.join(',')})ë¥¼ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë§ˆì¹˜ í™œì§ í•€ ê½ƒì— ë²Œê³¼ ë‚˜ë¹„ê°€ ê¼¬ì´ëŠ” í˜•êµ­ê³¼ ê°™ì•„, ë§¤ë ¥ì˜ íŒŒê¸‰ë ¥ì´ ì¼ë°˜ ë„í™”ë³´ë‹¤ í›¨ì”¬ ê°•ë ¥í•©ë‹ˆë‹¤. ë³¸ì¸ì´ ì›í•˜ì§€ ì•Šì•„ë„ ëŒ€ì¤‘ì˜ ì£¼ëª©ì„ ë°›ê²Œ ë˜ë©°, ì—°ì˜ˆ, ë°©ì†¡, ì˜ˆìˆ  ë“± ì¸ê¸°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì§ì—…ì—ì„œ íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•˜ëŠ” ì„±ê³µì„ ê±°ë‘˜ ìˆ˜ ìˆëŠ” ìµœìƒê¸‰ ë„í™”ì…ë‹ˆë‹¤.</p><br>`;
                
                if(found.nache) detailHTML += `<p><strong>[ë‚˜ì²´ë„í™”(è£¸é«”æ¡ƒèŠ±)]:</strong> 'ê¾¸ë¯¸ì§€ ì•Šì€ ì•Œëª¸ì˜ ë„í™”'ë¼ëŠ” ëœ»ìœ¼ë¡œ, í™”ì¥ì´ë‚˜ ì˜·ìœ¼ë¡œ ì¹˜ì¥í•˜ì§€ ì•Šì•„ë„ ë¿œì–´ì ¸ ë‚˜ì˜¤ëŠ” ì›ì´ˆì ì´ê³  ë³¸ëŠ¥ì ì¸ ë§¤ë ¥ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ì–´ë¦°ì•„ì´ ê°™ì€ ì²œì§„ë‚œë§Œí•¨ê³¼ ìœ¡ì²´ì ì¸ ì„¹ì‹œí•¨ì´ ê³µì¡´í•˜ì—¬ ì´ì„±ì˜ ë§ˆìŒì„ ìˆœì‹ê°„ì— ë¬´ì¥í•´ì œ ì‹œí‚µë‹ˆë‹¤. ë‹¤ë§Œ, ê°ì •ì— ë„ˆë¬´ ì†”ì§í•˜ê³  ê±°ë¦¬ë‚Œì´ ì—†ì–´ ìŠ¤ìº”ë“¤ì— íœ˜ë§ë¦¬ê±°ë‚˜ êµ¬ì„¤ìˆ˜ì— ì˜¤ë¥¼ ìœ„í—˜ì´ í¬ë‹ˆ, íƒ€ì¸ì˜ ì‹œì„ ì„ ì˜ì‹í•˜ëŠ” ì§€í˜œê°€ í•„ìš”í•©ë‹ˆë‹¤.</p><br>`;
                
                if(found.hong) detailHTML += `<p><strong>[í™ì—¼ì‚´(ç´…è‰¶æ®º)]:</strong> ë„í™”ì‚´ì´ ë§Œì¸ì—ê²Œ ì‚¬ë‘ë°›ëŠ” 'ì•„ì´ëŒ' ê°™ì€ ê¸°ìš´ì´ë¼ë©´, í™ì—¼ì‚´ì€ ë‚´ê°€ ì°ì€ íŠ¹ì • 1ì¸ì—ê²Œ ì¹˜ëª…ì ì¸ 'ëˆˆì›ƒìŒ'ì„ ë³´ë‚´ëŠ” ê°•ë ¥í•œ í˜ë¡œëª¬ì…ë‹ˆë‹¤. í‰ì†Œì—ëŠ” ì¡°ìš©í•˜ë‹¤ê°€ë„ ê²°ì •ì ì¸ ìˆœê°„ì— ì´ì„±ì„ í™€ë¦¬ëŠ” êµíƒœì™€ ë§¤ë ¥ì´ ë„˜ì¹©ë‹ˆë‹¤. ë‹¤ì •ë‹¤ê°í•˜ê³  ê·€ì—¬ìš´ ë§¤ë ¥ìœ¼ë¡œ ì—°ì¸ ê´€ê³„ì—ì„œ ì‚¬ë‘ë°›ì§€ë§Œ, ìì¹« í—¤í”ˆ ì‚¬ëŒìœ¼ë¡œ ì˜¤í•´ë°›ê±°ë‚˜ ì›ì¹˜ ì•ŠëŠ” ìƒëŒ€ê°€ ê¼¬ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì²˜ì‹ ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.</p><br>`;
                
                if(found.wall.length > 0) detailHTML += `<p><strong>[ì¥ë‚´ë„í™”(ì›”/ë…„)]:</strong> 'ë‹´ì¥ ì•ˆì˜ ê½ƒ'ì²˜ëŸ¼ ì‚¬íšŒì , ê³µì ì¸ ì˜ì—­ì—ì„œ í”¼ì–´ë‚˜ëŠ” ë„í™”ì…ë‹ˆë‹¤. ê·€í•˜ì˜ ë§¤ë ¥ê³¼ ì¸ê¸°ëŠ” ì£¼ë¡œ ì§ì¥, í•™êµ, ëª¨ì„ ë“± ì‚¬íšŒ í™œë™ ë¬´ëŒ€ì—ì„œ ë¹›ì„ ë°œí•˜ë©°, ì—…ë¬´ì ì¸ ì„±ê³¼ë‚˜ í‰íŒìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìŠ¹ì§„ì´ë‚˜ ì¸ì •ì„ ë°›ëŠ” ë° í° ë„ì›€ì„ ì¤ë‹ˆë‹¤. ì‹ ë¢°ê° ìˆëŠ” ì¸ê¸°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p><br>`;
                
                if(found.garden.length > 0) detailHTML += `<p><strong>[ì¥ì™¸ë„í™”(ì¼/ì‹œ)]:</strong> 'ë‹´ì¥ ë°–ìœ¼ë¡œ ê°€ì§€ë¥¼ ë»—ì€ ê½ƒ'ì²˜ëŸ¼ ì‚¬ì ì¸ ì˜ì—­ì—ì„œ í”¼ì–´ë‚˜ëŠ” ë„í™”ì…ë‹ˆë‹¤. ê³µì ì¸ ê´€ê³„ë³´ë‹¤ëŠ” ê°œì¸ì ì¸ ë§Œë‚¨, ì—°ì• , ìœ í¥ì˜ ìë¦¬ì—ì„œ ì¸ê¸°ê°€ í­ë°œí•©ë‹ˆë‹¤. ì´ì„±ì—ê²Œ ì–´í•„í•˜ëŠ” í˜ì´ ë§¤ìš° ê°•í•˜ì—¬ ì—°ì•  ê¸°íšŒê°€ ë§ì§€ë§Œ, ìì¹«í•˜ë©´ ë°”ëŒê¸°ë‚˜ ë³µì¡í•œ ì• ì •ì‚¬ë¡œ íë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ìê¸° ì ˆì œê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.</p>`;
                
                detailHTML += `</div></div>`;
            }

            // ê¸°ë³¸ ë„í™” ì„¤ëª…
            if(found.basic.length > 0) {
                detailHTML += `<div class="card"><div class="card-title">ë³´ìœ  ê¸€ì ìƒì„¸ í•´ì„¤</div><div class="text-content">`;
                // ì¤‘ë³µ ì œê±°
                let uniqueDohwa = [...new Set(found.basic)];
                uniqueDohwa.forEach(char => {
                    const info = DB_DOHWA_BASIC[char];
                    detailHTML += `<div style="margin-bottom:20px; border-bottom:1px dashed #eee; padding-bottom:15px;"><strong>ğŸŒ¸ ${info.name}</strong><br><span style="font-size:0.95rem; color:#555;">${info.desc}</span></div>`;
                });
                detailHTML += `</div></div>`;
            }


            // Verdict ì„¤ì •
            if (totalCount === 0 && !found.nache && !found.hong) {
                verdictEl.innerText = "ë„í™”ì‚´ ì—†ìŒ (Clean)";
                descEl.innerText = "í™”ë ¤í•¨ë³´ë‹¤ ì€ì€í•˜ê³  ì§„ì†”í•œ ë§¤ë ¥";
                detailHTML = `<div class="card"><div class="card-title">ë¶„ì„ ê²°ê³¼</div><div class="text-content"><p>ê·€í•˜ì˜ ì‚¬ì£¼ ì§€ì§€(åœ°æ”¯)ì—ëŠ” ë„í™”ì‚´(ì, ì˜¤, ë¬˜, ìœ )ì´ë‚˜ í™ì—¼ì‚´ ê°™ì€ ê°•ë ¥í•œ ë§¤ë ¥ ì¸ìê°€ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ë§í•˜ì‹¤ í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ì´ì„± ë¬¸ì œë¡œ ì¸í•œ ë³µì¡í•œ êµ¬ì„¤ìˆ˜ë‚˜ ìŠ¤ìº”ë“¤ì´ ì¼ì–´ë‚  í™•ë¥ ì´ í˜„ì €íˆ ë‚®ê³ , ì¸ìƒì´ í‰íƒ„í•¨ì„ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p><p>ê·€í•˜ëŠ” ê²‰ìœ¼ë¡œ í™”ë ¤í•˜ê²Œ ë“œëŸ¬ë‚˜ëŠ” 'ë¼'ë³´ë‹¤ëŠ”, ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ìš°ëŸ¬ë‚˜ì˜¤ëŠ” 'ì§„êµ­' ê°™ì€ ë§¤ë ¥ì„ ì§€ë…”ìŠµë‹ˆë‹¤. ë‹´ë°±í•˜ê³  ì§„ì†”í•œ íƒœë„ë¡œ íƒ€ì¸ì—ê²Œ ì‹ ë¢°ê°ì„ ì£¼ë©°, ê°€ë²¼ìš´ ë§Œë‚¨ë³´ë‹¤ëŠ” ê¹Šì´ ìˆëŠ” ê´€ê³„ë¥¼ í˜•ì„±í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤. í™”ë ¤í•œ ê½ƒë³´ë‹¤ëŠ” ë“ ë“ í•œ ë‚˜ë¬´ì™€ ê°™ì€ ë§¤ë ¥ì˜ ì†Œìœ ìì…ë‹ˆë‹¤.</p></div></div>`;
                adviceEl.innerText = "ì–µì§€ë¡œ ìœ í–‰ì„ ì«“ê±°ë‚˜ í™”ë ¤í•˜ê²Œ ì¹˜ì¥í•˜ì—¬ ë¼ë¥¼ ë¶€ë¦¬ëŠ” ê²ƒì€ ê·€í•˜ì˜ ë³¸ì§ˆê³¼ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·€í•˜ì˜ ê°€ì¥ í° ë¬´ê¸°ëŠ” 'ì‹ ë¢°ê°'ê³¼ 'ì„±ì‹¤í•¨'ì—ì„œ ì˜¤ëŠ” ì§€ì ì¸ ì•„ìš°ë¼ì…ë‹ˆë‹¤. ê°€ë²¼ìš´ ì–¸í–‰ì„ ì‚¼ê°€ê³ , ì°¨ë¶„í•˜ê³  ë‹¨ì •í•œ ì´ë¯¸ì§€ë¥¼ êµ¬ì¶•í•  ë•Œ ê·€í•˜ë¥¼ ì§„ì •ìœ¼ë¡œ ì•„ê»´ì¤„ ê·€í•œ ì¸ì—°ì´ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.";
            } else {
                let title = `ë„í™” ${totalCount}ê°œ`;
                if(found.jin.length > 0) title += " + ì§„ë„í™”";
                if(found.hong) title += " + í™ì—¼";
                verdictEl.innerText = title;
                descEl.innerText = "ìˆ¨ê¸¸ ìˆ˜ ì—†ëŠ” ì¹˜ëª…ì  ë§¤ë ¥ì˜ ì†Œìœ ì";
                
                // ì¡°ì–¸ (ë” ê¸¸ê²Œ)
                if(totalCount >= 3 || (found.jin.length > 0 && found.nache)) {
                    adviceEl.innerText = "ê·€í•˜ëŠ” ë„í™”ì˜ ê¸°ìš´ì´ ì°¨ê³  ë„˜ì³, ìì¹«í•˜ë©´ 'ë„í™”ì‚´(æ®º)'ì´ë¼ëŠ” í‰í•œ ì¹¼ë‚ ì´ ë˜ì–´ ëŒì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³¸ì¸ì´ ì˜ë„í•˜ì§€ ì•Šì•„ë„ ì£¼ë³€ì— ì´ì„±ì´ ê¼¬ì´ê³ , ì‚¬ì†Œí•œ í–‰ë™ì´ ì˜¤í•´ë¥¼ ë¶ˆëŸ¬ì¼ìœ¼ì¼œ êµ¬ì„¤ìˆ˜ì— íœ˜ë§ë¦¬ê¸° ì‹­ìƒì…ë‹ˆë‹¤. ì´ ë„˜ì¹˜ëŠ” ì—ë„ˆì§€ë¥¼ ë‹¨ìˆœíˆ ì—°ì• ë‚˜ ìœ í¥ìœ¼ë¡œ í’€ë©´ íŒ¨ê°€ë§ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ë“œì‹œ ë°©ì†¡, ì˜ˆìˆ , ì˜ì—…, ê°•ì‚¬ ë“± ëŒ€ì¤‘ ì•ì— ì„œì„œ ìì‹ ì„ ë“œëŸ¬ë‚´ëŠ” ì§ì—…ì„ í†µí•´ ì´ 'ë¼'ë¥¼ 'ì§ì—…ì  ì„±ì·¨'ë¡œ ìŠ¹í™”ì‹œì¼œì•¼ í•©ë‹ˆë‹¤. ê·¸ê²ƒì´ ê·€í•˜ê°€ ê°€ì§„ ê°•ë ¥í•œ ë¬´ê¸°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì“°ëŠ” ìœ ì¼í•œ ê¸¸ì…ë‹ˆë‹¤.";
                } else if(found.hong) {
                    adviceEl.innerText = "ê·€í•˜ëŠ” ë„í™”ë³´ë‹¤ ë” ê°•ë ¥í•  ìˆ˜ ìˆëŠ” 'í™ì—¼ì‚´'ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì›ƒëŠ” ëª¨ìŠµì´ ìœ ë… ë§¤ë ¥ì ì´ë¼, ê·€í•˜ì˜ ë¯¸ì†Œ í•œ ë²ˆì— ìƒëŒ€ë°©ì€ í° ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ê³  ì°©ê°ì— ë¹ ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ë„ì¹˜ ì•Šê²Œ ì–´ì¥ ê´€ë¦¬ë¥¼ í•œë‹¤ëŠ” ì˜¤í•´ë¥¼ ë°›ê±°ë‚˜, ì›ì¹˜ ì•ŠëŠ” ìƒëŒ€ê°€ ëˆì§ˆê¸°ê²Œ ë‹¬ë¼ë¶™ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì¸ì—ê²Œ ì¹œì ˆí•˜ê¸°ë³´ë‹¤ëŠ”, ë‚´ ì‚¬ëŒì—ê²Œë§Œ í™•ì‹¤í•˜ê²Œ ë§¤ë ¥ì„ ë³´ì—¬ì£¼ëŠ” 'ì² ë²½'ê³¼ 'ë‹¤ì •í•¨'ì˜ ê· í˜•ì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë¬´ì—ê²Œë‚˜ ì—¬ì§€ë¥¼ ì£¼ì§€ ë§ˆì‹­ì‹œì˜¤.";
                } else {
                    adviceEl.innerText = "ê·€í•˜ëŠ” ì ì ˆí•˜ê³  ê¸°ë¶„ ì¢‹ì€ ë„í™”ì˜ ê¸°ìš´ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ê³¼í•˜ì§€ë„ ë¶€ì¡±í•˜ì§€ë„ ì•Šì•„, íƒ€ì¸ì—ê²Œ í˜¸ê°ì„ ì‚¬ê³  ì¸ê¸°ë¥¼ ì–»ëŠ” ë° ìµœì í™”ëœ ìƒíƒœì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë§¤ë ¥ì€ ë¹„ë‹¨ ì´ì„± ê´€ê³„ë¿ë§Œ ì•„ë‹ˆë¼, ë¹„ì¦ˆë‹ˆìŠ¤ë‚˜ ì‚¬íšŒìƒí™œì—ì„œë„ ê°•ë ¥í•œ ë¬´ê¸°ê°€ ë©ë‹ˆë‹¤. ì‚¬ëŒë“¤ì´ ê·€í•˜ì™€ ëŒ€í™”í•˜ê³  ì‹¶ì–´ í•˜ê³  ê°€ê¹Œì´ ì§€ë‚´ê³  ì‹¶ì–´ í•˜ë‹ˆ, ì´ë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ ì¸ë§¥ì„ ë„“íˆê³  ì‚¬íšŒì  ì„±ê³µì˜ ë°œíŒìœ¼ë¡œ ì‚¼ìœ¼ì‹­ì‹œì˜¤. ìì‹ ê°ì„ ê°€ì§€ê³  ë§¤ë ¥ì„ ë°œì‚°í•´ë„ ì¢‹ìŠµë‹ˆë‹¤.";
                }
            }

            document.getElementById('dohwa-details').innerHTML = detailHTML;

            // í™”ë©´ ì „í™˜
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('input-form-area').style.display = 'none';
            document.getElementById('result-area').style.display = 'block';
            document.getElementById('btn-save').style.display = 'block';
            window.scrollTo(0,0);

        }, 2200);
    },

    saveImage: function() {
        window.scrollTo(0,0);
        html2canvas(document.getElementById('print-target'), {scale:2, useCORS:true}).then(c => {
            let l = document.createElement('a'); l.download = 'Full_Dohwa_Report.png'; l.href = c.toDataURL(); l.click();
        });
    }
};

const ui = {
    gen: 'm', calType: 'solar',
    init: function() {
        const y = document.getElementById('sel-year'), m = document.getElementById('sel-month'), d = document.getElementById('sel-day');
        for(let i=2026; i>=1940; i--) { let o=document.createElement('option'); o.text=i+'ë…„'; o.value=i; y.add(o); }
        y.value=1995;
        for(let i=1; i<=12; i++) { let o=document.createElement('option'); o.text=i+'ì›”'; o.value=i; m.add(o); }
        for(let i=1; i<=31; i++) { let o=document.createElement('option'); o.text=i+'ì¼'; o.value=i; d.add(o); }
    },
    setGender: function(v) { this.gen=v; document.getElementById('btn-male').className=v==='m'?'btn-option selected':'btn-option'; document.getElementById('btn-female').className=v==='f'?'btn-option selected':'btn-option'; },
    setCal: function(v) { this.calType=v; document.getElementById('btn-solar').className=v==='solar'?'btn-option selected':'btn-option'; document.getElementById('btn-lunar').className=v==='lunar'?'btn-option selected':'btn-option'; }
};

window.onload = function() { ui.init(); };
</script>
</body>
</html>