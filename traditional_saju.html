<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš´ì  - ì •í†µ ì‚¬ì£¼ ì •ë°€ ë¶„ì„</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.6.12/lunar.js"></script>
    <style>
        @font-face {
            font-family: 'ThinRounded';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/ThinDungGeunMo.woff2') format('woff2');
            font-weight: normal; font-style: normal; font-display: swap;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); }
        ::-webkit-scrollbar-thumb { background: #b8860b; border-radius: 10px; }

        body {
            font-family: 'ThinRounded', sans-serif;
            background-color: #1a0509; /* ë”¥ ë²„ê±´ë”” ë¸”ë™ */
            color: #e6dace; /* í•œì§€ ìƒ‰ìƒ */
            line-height: 2.0; overflow-x: hidden; font-size: 18px;
        }

        header {
            position: fixed; top: 0; left: 0; width: 100%; height: 80px;
            background-color: #2c0b15; display: flex; justify-content: space-between;
            align-items: center; padding: 0 30px; z-index: 1000;
            border-bottom: 1px solid #8b6c4e;
        }
        .logo { font-size: 2.2rem; color: #ffd700; text-decoration: none; font-weight: bold; }
        .top-menu { display: flex; gap: 20px; }
        .top-menu a { color: #e6dace; text-decoration: none; font-size: 1.1rem; cursor: pointer; }

        .sidebar {
            position: fixed; top: 80px; left: 0; width: 280px;
            height: calc(100vh - 80px); background-color: #22080f;
            padding: 25px; overflow-y: auto; border-right: 1px solid #5c2836;
        }
        .category-title { font-size: 1.3rem; color: #ffd700; margin-bottom: 12px; display: block; border-bottom: 1px solid #5c2836; padding-bottom: 5px; }
        .sub-menu { list-style: none; padding-left: 10px; }
        .sub-menu li { margin: 10px 0; }
        .sub-menu a { color: #ccb7b7; text-decoration: none; font-size: 1.1rem; cursor: pointer; transition: 0.2s; }
        .sub-menu a:hover { color: #ffd700; padding-left: 5px; }

        main {
            margin-top: 80px; margin-left: 280px;
            padding: 60px 40px; display: flex; justify-content: center;
        }
        .fortune-page { width: 100%; max-width: 1000px; text-align: center; }
        .page-title { font-size: 2.8rem; color: #ffd700; margin-bottom: 35px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); }

        .input-card {
            background: rgba(20, 5, 8, 0.95); padding: 40px; border-radius: 15px;
            border: 2px solid #8b6c4e; text-align: left; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .input-row { margin-bottom: 25px; }
        .input-row label { display: block; margin-bottom: 10px; color: #ffd700; font-size: 1.2rem; }
        
        .select-group { display: flex; gap: 10px; width: 100%; }
        select, input[type="text"] {
            flex: 1; padding: 12px; 
            background-color: #2c0b15; color: #e6dace;
            border: 1px solid #8b6c4e; border-radius: 8px; 
            font-family: 'ThinRounded'; font-size: 1.1rem;
            height: 55px; 
            cursor: pointer;
        }
        option { background-color: #22080f; color: #e6dace; }

        .type-toggle { display: flex; gap: 10px; margin-top: 10px; }
        .type-btn { flex: 1; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid #8b6c4e; color: #ccb7b7; border-radius: 8px; cursor: pointer; text-align: center; font-size: 1.1rem; }
        .type-btn.active { background: #b8860b; color: #1a0509; border-color: #ffd700; font-weight: bold; }

        .gender-group { display: flex; gap: 20px; margin-bottom: 10px; }
        .radio-label { 
            flex: 1; padding: 15px; background: #2c0b15; border: 1px solid #8b6c4e; 
            border-radius: 8px; cursor: pointer; text-align: center; font-size: 1.2rem; display: flex; align-items: center; justify-content: center;
        }
        input[type="radio"] { margin-right: 10px; accent-color: #ffd700; transform: scale(1.3); }
        input[type="radio"]:checked + span { color: #ffd700; font-weight: bold; }

        .submit-btn {
            width: 100%; padding: 20px; background: linear-gradient(45deg, #b8860b, #e0c097); color: #2a0a12;
            border: none; border-radius: 8px; font-size: 1.6rem; font-weight: bold;
            cursor: pointer; font-family: 'ThinRounded'; margin-top: 25px;
            box-shadow: 0 5px 15px rgba(184, 134, 11, 0.3); transition: 0.3s;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(184, 134, 11, 0.5); }

        #result-area { margin-top: 60px; display: none; text-align: left; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .saju-table {
            width: 100%; border-collapse: separate; border-spacing: 0; margin-bottom: 30px;
            border: 2px solid #8b6c4e; background: #2c0b15; border-radius: 10px; overflow: hidden;
        }
        .saju-table th { background: #3d0e1e; color: #ffd700; padding: 15px; border-bottom: 2px solid #8b6c4e; font-size: 1.2rem; }
        .saju-table td { padding: 25px 10px; text-align: center; border-right: 1px solid #5c2836; vertical-align: middle; position: relative; }
        .saju-table td:last-child { border-right: none; }
        
        .pillar-char { font-size: 3rem; font-weight: bold; display: block; margin: 10px 0; text-shadow: 2px 2px 4px #000; font-family: serif; }
        .ten-god { font-size: 0.9rem; color: #a89f91; display: block; margin-bottom: 5px; }
        .wuxing-label { font-size: 0.9rem; font-weight: bold; padding: 3px 8px; border-radius: 4px; color: #1a0509; display: inline-block; }

        .wood { color: #4ade80; } .fire { color: #ff6b6b; } .earth { color: #facc15; } .metal { color: #e5e7eb; } .water { color: #60a5fa; }
        .bg-wood { background: #4ade80; } .bg-fire { background: #ff6b6b; } .bg-earth { background: #facc15; } .bg-metal { background: #e5e7eb; } .bg-water { background: #60a5fa; }

        .analysis-section { 
            margin-bottom: 50px; background: rgba(30, 10, 15, 0.85); padding: 40px; border-radius: 15px; 
            border: 1px solid #5c2836; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .section-header { 
            font-size: 1.8rem; color: #ffd700; margin-bottom: 25px; border-bottom: 2px solid #8b6c4e; 
            padding-bottom: 10px; font-weight:bold; display: flex; align-items: center; gap: 10px;
        }
        .detail-text { 
            font-size: 1.15rem; line-height: 2.1; white-space: pre-wrap; color: #e6dace; text-align: justify; letter-spacing: 0.5px;
        }
        .detail-text strong { color: #ffd700; font-weight: bold; }

        .daewoon-grid {
            display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px;
            background: #2c0b15; padding: 20px; border-radius: 10px; border: 1px solid #8b6c4e; text-align: center;
        }
        .daewoon-item { padding: 10px 0; border-right: 1px dashed #5c2836; }
        .daewoon-item:last-child { border-right: none; }
        .dw-age { display: block; font-size: 0.9rem; color: #ccb7b7; margin-bottom: 5px; }
        .dw-ganzhi { display: block; font-size: 1.4rem; font-weight: bold; color: #ffd700; font-family: serif; }

        @media (max-width: 768px) {
            .sidebar { display: none; }
            main { margin-left: 0; padding: 20px; }
            .daewoon-grid { grid-template-columns: repeat(5, 1fr); gap: 15px; }
            .daewoon-item { border-bottom: 1px dashed #5c2836; border-right: none; padding: 15px 0; }
            .saju-table th, .saju-table td { padding: 15px 5px; }
            .pillar-char { font-size: 2.2rem; }
            .page-title { font-size: 2.2rem; }
            .section-header { font-size: 1.5rem; }
            .detail-text { font-size: 1.1rem; }
        }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo">ìš´ì </a>
        <nav class="top-menu">
            <a>ìš´ì„¸</a><a>ì‚¬ì£¼</a><a>ì—°ì• </a>
        </nav>
    </header>

    <aside class="sidebar">
        <div class="menu-category">
            <span class="category-title">ì‚¬ì£¼ í’€ì´</span>
            <ul class="sub-menu">
                <li><a href="#" style="color:#ffd700; font-weight:bold;">ì •í†µ ì‚¬ì£¼</a></li>
                <li><a>ë‚´ ì‚¬ì£¼ í’€ì´</a></li>
            </ul>
        </div>
    </aside>

    <main>
        <div class="fortune-page">
            <h2 class="page-title">ì •í†µ ì‚¬ì£¼ ì •ë°€ ë¶„ì„</h2>
            <div class="input-card">
                <div class="input-row">
                    <label>ì´ë¦„</label>
                    <input type="text" id="userName" placeholder="ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
                </div>
                <div class="input-row">
                    <label>ì„±ë³„ (ëŒ€ìš´ íë¦„ ê²°ì •)</label>
                    <div class="gender-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="m" checked> <span>ë‚¨ì„±</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="f"> <span>ì—¬ì„±</span>
                        </label>
                    </div>
                </div>
                <div class="input-row">
                    <label>ìƒë…„ì›”ì¼</label>
                    <div class="select-group">
                        <select id="yearSelect"></select>
                        <select id="monthSelect"></select>
                        <select id="daySelect"></select>
                    </div>
                    <div class="type-toggle">
                        <div id="solarBtn" class="type-btn active" onclick="setCalendar('solar')">ì–‘ë ¥</div>
                        <div id="lunarBtn" class="type-btn" onclick="setCalendar('lunar')">ìŒë ¥</div>
                    </div>
                </div>
                <div class="input-row">
                    <label>íƒœì–´ë‚œ ì‹œê°„ (ì‹œì£¼ ê²°ì •)</label>
                    <select id="hourSelect">
                        <option value="12">ëª¨ë¦„ (ì •í™•ë„ ë‚®ì•„ì§)</option>
                        <option value="0">ìì‹œ (23:30 ~ 01:29)</option><option value="2">ì¶•ì‹œ (01:30 ~ 03:29)</option>
                        <option value="4">ì¸ì‹œ (03:30 ~ 05:29)</option><option value="6">ë¬˜ì‹œ (05:30 ~ 07:29)</option>
                        <option value="8">ì§„ì‹œ (07:30 ~ 09:29)</option><option value="10">ì‚¬ì‹œ (09:30 ~ 11:29)</option>
                        <option value="12">ì˜¤ì‹œ (11:30 ~ 13:29)</option><option value="14">ë¯¸ì‹œ (13:30 ~ 15:29)</option>
                        <option value="16">ì‹ ì‹œ (15:30 ~ 17:29)</option><option value="18">ìœ ì‹œ (17:30 ~ 19:29)</option>
                        <option value="20">ìˆ ì‹œ (19:30 ~ 21:29)</option><option value="22">í•´ì‹œ (21:30 ~ 23:29)</option>
                    </select>
                </div>
                <button class="submit-btn" onclick="analyzeSaju()">ì‚¬ì£¼ ì „ì²´ í’€ì´ ë³´ê¸°</button>
            </div>

            <div id="result-area">
                <div class="analysis-section">
                    <h3 class="section-header">ğŸ“œ ì‚¬ì£¼ ì›êµ­ (Destiny Chart)</h3>
                    <table class="saju-table">
                        <thead>
                            <tr><th>ì‹œì£¼</th><th>ì¼ì£¼ (ë³¸ì¸)</th><th>ì›”ì£¼</th><th>ë…„ì£¼</th></tr>
                        </thead>
                        <tbody id="sajuBody"></tbody>
                    </table>
                </div>

                <div class="analysis-section">
                    <h3 class="section-header">ğŸŒŠ ëŒ€ìš´ì˜ íë¦„ (10ë…„ ì£¼ê¸°)</h3>
                    <div id="daewoonDisplay" class="daewoon-grid"></div>
                    <p style="margin-top:20px; color:#ccb7b7;">* ê·€í•˜ì˜ ëŒ€ìš´ì€ <span style="color:#ffd700" id="directionText"></span> íë¦„ì…ë‹ˆë‹¤.</p>
                </div>

                <div class="analysis-section">
                    <h3 class="section-header">ğŸ” ì œ 1ì¥ : íƒ€ê³ ë‚œ ê¸°ì§ˆê³¼ ë³¸ì„±</h3>
                    <div id="iljuAnalysis" class="detail-text"></div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-header">âš–ï¸ ì œ 2ì¥ : ì˜¤í–‰ì˜ ì¡°í™”ì™€ ê±´ê°•</h3>
                    <div id="balanceAnalysis" class="detail-text"></div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-header">ğŸ’¼ ì œ 3ì¥ : ì‚¬íšŒì  ì„±ê³µê³¼ ì¬ë¬¼ìš´</h3>
                    <div id="careerAnalysis" class="detail-text"></div>
                </div>
                
                <div class="analysis-section">
                    <h3 class="section-header">âœ¨ ì œ 4ì¥ : í‰ìƒ ì´ìš´ ë° ì¸ìƒ ì¡°ì–¸</h3>
                    <div id="totalAdvice" class="detail-text"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // [ìˆ˜ì •1] ë‚ ì§œ ì´ˆê¸°í™”ë¥¼ window.onloadë¡œ ê°ì‹¸ì„œ í˜ì´ì§€ê°€ ë‹¤ ëœ¬ ë’¤ ë¬´ì¡°ê±´ ì‹¤í–‰ë˜ê²Œ í•¨
        window.onload = function() {
            const ys = document.getElementById('yearSelect');
            const ms = document.getElementById('monthSelect');
            const ds = document.getElementById('daySelect');
            
            // ê¸°ì¡´ ì˜µì…˜ ì œê±°
            ys.innerHTML = ""; ms.innerHTML = ""; ds.innerHTML = "";
            
            // ë…„ë„ ì±„ìš°ê¸°
            for(let i=2026; i>=1930; i--) { 
                let opt = document.createElement("option");
                opt.value = i; opt.innerText = i + "ë…„";
                ys.appendChild(opt);
            }
            // ì›” ì±„ìš°ê¸°
            for(let i=1; i<=12; i++) { 
                let opt = document.createElement("option");
                opt.value = i; opt.innerText = i + "ì›”";
                ms.appendChild(opt);
            }
            // ì¼ ì±„ìš°ê¸°
            for(let i=1; i<=31; i++) { 
                let opt = document.createElement("option");
                opt.value = i; opt.innerText = i + "ì¼";
                ds.appendChild(opt);
            }
        };

        let calendarType = 'solar';
        function setCalendar(type) {
            calendarType = type;
            document.getElementById('solarBtn').classList.toggle('active', type === 'solar');
            document.getElementById('lunarBtn').classList.toggle('active', type === 'lunar');
        }

        const GAN = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"];
        const ZHI = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];
        const WUXING = {
            "ç”²":"ëª©", "ä¹™":"ëª©", "å¯…":"ëª©", "å¯":"ëª©",
            "ä¸™":"í™”", "ä¸":"í™”", "å·³":"í™”", "åˆ":"í™”",
            "æˆŠ":"í† ", "å·±":"í† ", "è¾°":"í† ", "æˆŒ":"í† ", "ä¸‘":"í† ", "æœª":"í† ",
            "åºš":"ê¸ˆ", "è¾›":"ê¸ˆ", "ç”³":"ê¸ˆ", "é…‰":"ê¸ˆ",
            "å£¬":"ìˆ˜", "ç™¸":"ìˆ˜", "äº¥":"ìˆ˜", "å­":"ìˆ˜"
        };
        const COLOR_CLASS = {"ëª©":"wood", "í™”":"fire", "í† ":"earth", "ê¸ˆ":"metal", "ìˆ˜":"water"};
        const BG_CLASS = {"ëª©":"bg-wood", "í™”":"bg-fire", "í† ":"bg-earth", "ê¸ˆ":"bg-metal", "ìˆ˜":"bg-water"};

        const ganTraits = {
            "ç”²": "ê³§ê²Œ ë»—ì€ ê±°ëª©ì²˜ëŸ¼ ìì¡´ì‹¬ì´ ê°•í•˜ê³  ì¶”ì§„ë ¥ì´ ìˆìœ¼ë©° êµ½íˆê¸° ì‹«ì–´í•˜ëŠ” ê°•ì§í•œ ì„±í’ˆ",
            "ä¹™": "ìœ ì—°í•œ í™”ì´ˆì²˜ëŸ¼ í™˜ê²½ ì ì‘ë ¥ì´ ë›°ì–´ë‚˜ê³  ë¶€ë“œëŸ¬ì›€ ì†ì— ê°•ì¸í•œ ìƒëª…ë ¥ì„ ê°ì¶˜ ì™¸ìœ ë‚´ê°•í˜•",
            "ä¸™": "íƒœì–‘ì²˜ëŸ¼ ë§Œë¬¼ì„ ë¹„ì¶”ëŠ” ë°ê³  ì •ì—´ì ì¸ ì—ë„ˆì§€ë¡œ ì˜ˆì˜ë¥¼ ì¤‘ì‹œí•˜ë©° ìˆ¨ê¹€ì—†ì´ ìì‹ ì„ ë“œëŸ¬ë‚´ëŠ” ì„±í–¥",
            "ä¸": "ë°¤í•˜ëŠ˜ì˜ ë³„ì´ë‚˜ ì´›ë¶ˆì²˜ëŸ¼ ì€ì€í•˜ê³  ì„¬ì„¸í•˜ë©° ë‚´ë©´ì— ëœ¨ê±°ìš´ ì—´ì •ê³¼ í—Œì‹ ì„ í’ˆì€ ì§‘ì¤‘ë ¥",
            "æˆŠ": "ë„“ì€ ëŒ€ì§€ë‚˜ ì‚°ì²˜ëŸ¼ ëª¨ë“  ê²ƒì„ í¬ìš©í•˜ëŠ” ì¤‘í›„í•¨ê³¼ ì‹ ìš©ì„ ì¤‘ì‹œí•˜ë©° ë¬µì§í•˜ê²Œ ì¤‘ì‹¬ì„ ì¡ëŠ” ë¦¬ë”ì‹­",
            "å·±": "ë¹„ì˜¥í•œ ë°­í™ì²˜ëŸ¼ ì‹¤ì†ì„ ì±™ê¸°ê³  íƒ€ì¸ì„ ê¸°ë¥´ëŠ” ì–´ë¨¸ë‹ˆ ê°™ì€ ë§ˆìŒìœ¼ë¡œ ë‹¤ì¬ë‹¤ëŠ¥í•˜ê³  í˜„ì‹¤ì ì¸ ê°ê°",
            "åºš": "ì œë ¨ë˜ì§€ ì•Šì€ ì›ì„ì²˜ëŸ¼ ë‹¨ë‹¨í•œ ì˜ë¦¬ì™€ ê²°ë‹¨ë ¥ì´ ìˆìœ¼ë©° ë§ºê³  ëŠìŒì´ í™•ì‹¤í•œ í˜ëª…ê°€ì˜ ê¸°ì§ˆ",
            "è¾›": "ì˜ ì„¸ê³µëœ ë³´ì„ì²˜ëŸ¼ ì˜ˆë¦¬í•˜ê³  ì„¬ì„¸í•˜ë©° ê¹”ë”í•˜ê³  ì •í™•í•œ ê²ƒì„ ì¶”êµ¬í•˜ëŠ” ì™„ë²½ì£¼ì˜ ì„±í–¥",
            "å£¬": "ê¹Šì€ ë°”ë‹¤ì²˜ëŸ¼ ì§€í˜œê°€ ë„“ê³  ìœ ì—°í•˜ê²Œ íë¥´ë©° í¬ìš©ë ¥ì´ í¬ê³  ì„ê¸°ì‘ë³€ì— ëŠ¥í•œ ìŠ¤ì¼€ì¼",
            "ç™¸": "ë§Œë¬¼ì„ ì ì‹œëŠ” ì‹œëƒ‡ë¬¼ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  ì´ëª…í•˜ë©° íƒ€ì¸ì„ ë°°ë ¤í•˜ê³  ì¡°ìš©íˆ ìŠ¤ë©°ë“œëŠ” ì§€ì ì¸ íƒêµ¬ì‹¬"
        };

        const zhiTraits = {
            "å­": "ìƒëª…ì˜ ì”¨ì•—ì„ í’ˆì€ ê¹Šì€ ì§€í˜œì™€ ì¡°ìš©í•¨", "ä¸‘": "ë¬µë¬µíˆ ì¼í•˜ë©° ê²°ê³¼ë¥¼ ìŒ“ì•„ê°€ëŠ” ëˆê¸°ì™€ ì¸ë‚´",
            "å¯…": "ìƒˆë¡œìš´ ì‹œì‘ì„ ì•Œë¦¬ëŠ” í˜¸ë‘ì´ì˜ ê¸°ìƒê³¼ ì¶”ì§„ë ¥", "å¯": "ìƒë™ê° ë„˜ì¹˜ê³  ë¶€ì§€ëŸ°í•˜ë©° ê¾¸ë¯¸ê¸°ë¥¼ ì¢‹ì•„í•˜ëŠ” ì‹¬ë¯¸ì•ˆ",
            "è¾°": "ì´ìƒì„ ê¿ˆê¾¸ë©° ë³€í™”ë¥¼ ì£¼ë„í•˜ëŠ” ìš©ì˜ ìŠ¤ì¼€ì¼", "å·³": "í™”ë ¤í•œ ì–¸ë³€ê³¼ ì‚¬êµì„±ìœ¼ë¡œ ëŒ€ì¤‘ì„ ì‚¬ë¡œì¡ëŠ” ë§¤ë ¥",
            "åˆ": "ì—´ì •ì ì´ê³  í™œë™ì ì´ë©° ì•ë§Œ ë³´ê³  ë‹¬ë¦¬ëŠ” ì§ì§„ì„±", "æœª": "ê²‰ì€ ë¶€ë“œëŸ¬ìš°ë‚˜ ì†ì€ ê°•í•œ ê³ ì§‘ì„ ê°€ì§„ ì™¸ìœ ë‚´ê°•",
            "ç”³": "ë‹¤ì¬ë‹¤ëŠ¥í•˜ê³  ì¬ì£¼ê°€ ë§ì•„ ì„ê¸°ì‘ë³€ì— ëŠ¥í•œ ëª¨ìŠµ", "é…‰": "ë‚ ì¹´ë¡œìš´ ì§ê´€ë ¥ê³¼ ë¶„ì„ë ¥ìœ¼ë¡œ í•µì‹¬ì„ ì°Œë¥´ëŠ” ëŠ¥ë ¥",
            "æˆŒ": "ì‹ ì˜ë¥¼ ì§€í‚¤ë©° ë§¡ì€ ë°” ì±…ì„ì„ ë‹¤í•˜ëŠ” ì¶©ì§í•¨", "äº¥": "í’ë¶€í•œ ìƒìƒë ¥ê³¼ ì¸ì • ê·¸ë¦¬ê³  ì—¬ìœ ë¡œìš´ ë‚™ì²œì„±"
        };

        function analyzeSaju() {
            const name = document.getElementById('userName').value;
            const yearVal = document.getElementById('yearSelect').value;
            const monthVal = document.getElementById('monthSelect').value;
            const dayVal = document.getElementById('daySelect').value;

            if(!name || !yearVal || !monthVal || !dayVal) { 
                alert("ì´ë¦„ê³¼ ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”."); return; 
            }
            
            const h = parseInt(document.getElementById('hourSelect').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;

            let lunarObj;
            try {
                if(calendarType === 'solar') {
                    lunarObj = Solar.fromYmdHms(parseInt(yearVal), parseInt(monthVal), parseInt(dayVal), h, 0, 0).getLunar();
                } else {
                    lunarObj = Lunar.fromYmdHms(parseInt(yearVal), parseInt(monthVal), parseInt(dayVal), h, 0, 0);
                }
            } catch(e) { alert("ë‚ ì§œ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."); return; }

            const eightChar = lunarObj.getEightChar();
            const pillars = [
                { gan: eightChar.getTimeGan(), zhi: eightChar.getTimeZhi() },
                { gan: eightChar.getDayGan(), zhi: eightChar.getDayZhi() }, 
                { gan: eightChar.getMonthGan(), zhi: eightChar.getMonthZhi() },
                { gan: eightChar.getYearGan(), zhi: eightChar.getYearZhi() }
            ];
            const me = pillars[1].gan;
            const myIlju = me + pillars[1].zhi;

            let html = `<tr>`;
            const getTenGod = (target) => {
                if(target === me) return "ë³¸ì›";
                const meIdx = GAN.indexOf(me);
                const tIdx = GAN.indexOf(target);
                if(meIdx === -1 || tIdx === -1) return "";
                const gods = ["ë¹„ê²¬","ê²ì¬","ì‹ì‹ ","ìƒê´€","í¸ì¬","ì •ì¬","í¸ê´€","ì •ê´€","í¸ì¸","ì •ì¸"];
                return gods[(tIdx - meIdx + 10) % 10];
            };

            for(let p of pillars) {
                let ganWu = WUXING[p.gan];
                let zhiWu = WUXING[p.zhi];
                html += `
                    <td>
                        <span class="ten-god">${getTenGod(p.gan)}</span>
                        <span class="pillar-char ${COLOR_CLASS[ganWu]}">${p.gan}</span>
                        <span class="wuxing-label ${BG_CLASS[ganWu]}">${ganWu}</span>
                        <hr style="border:0; border-top:1px dashed #5c2836; margin:15px 0;">
                        <span class="pillar-char ${COLOR_CLASS[zhiWu]}">${p.zhi}</span>
                        <span class="wuxing-label ${BG_CLASS[zhiWu]}">${zhiWu}</span>
                    </td>`;
            }
            html += `</tr>`;
            document.getElementById('sajuBody').innerHTML = html;

            const yearGanIndex = GAN.indexOf(pillars[3].gan);
            const isYearYang = yearGanIndex % 2 === 0;
            const isMale = gender === 'm';
            let isForward = (isYearYang && isMale) || (!isYearYang && !isMale);
            
            document.getElementById('directionText').innerText = isForward ? "ìˆœí–‰(ë¯¸ë˜ì§€í–¥ì )" : "ì—­í–‰(ë‚´ë©´ì„±ì°°ì )";

            let daewoonHtml = "";
            let startIdxGan = GAN.indexOf(pillars[2].gan);
            let startIdxZhi = ZHI.indexOf(pillars[2].zhi);

            for(let i=1; i<=10; i++) {
                if(isForward) {
                    startIdxGan = (startIdxGan + 1) % 10;
                    startIdxZhi = (startIdxZhi + 1) % 12;
                } else {
                    startIdxGan = (startIdxGan - 1 + 10) % 10;
                    startIdxZhi = (startIdxZhi - 1 + 12) % 12;
                }
                let dGan = GAN[startIdxGan];
                let dZhi = ZHI[startIdxZhi];
                daewoonHtml += `<div class="daewoon-item"><span class="dw-age">${i*10}ëŒ€ìš´</span><span class="dw-ganzhi"><span class="${COLOR_CLASS[WUXING[dGan]]}">${dGan}</span><span class="${COLOR_CLASS[WUXING[dZhi]]}">${dZhi}</span></span></div>`;
            }
            document.getElementById('daewoonDisplay').innerHTML = daewoonHtml;

            const iljuNarrative = 
                `ê·€í•˜ì˜ ì¼ì£¼ëŠ” [${myIlju}]ì…ë‹ˆë‹¤. í•˜ëŠ˜ì˜ ê¸°ìš´ì¸ ì²œê°„ [${me}]ì€ ${ganTraits[me]}ì„(ë¥¼) ì˜ë¯¸í•˜ë©°, ë•…ì˜ ê¸°ìš´ì¸ ì§€ì§€ [${pillars[1].zhi}]ëŠ” ${zhiTraits[pillars[1].zhi]}ì˜ í™˜ê²½ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n` +
                `ì´ ë‘ ê¸°ìš´ì˜ ê²°í•©ìœ¼ë¡œ ì¸í•´, ê·€í•˜ëŠ” ê²‰ìœ¼ë¡œëŠ” [${WUXING[me]}]ì˜ ì„±ì§ˆì„ ë ì–´ ${ganTraits[me].split(' ')[0]} ê°™ì€ ë©´ëª¨ë¥¼ ë³´ì´ì§€ë§Œ, ` +
                `ë‚´ë©´ì—ëŠ” [${WUXING[pillars[1].zhi]}]ì˜ ì‹¤ë¦¬ë¥¼ í’ˆê³  ìˆì–´ ê²°ì •ì ì¸ ìˆœê°„ì—ëŠ” ${zhiTraits[pillars[1].zhi].split(' ')[0]} ì²˜ëŸ¼ í–‰ë™í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.\n\n` +
                `íŠ¹íˆ ë³¸ì›ì¸ [${me}]ì€ ì¸ìƒì˜ ì„ ì¥ê³¼ë„ ê°™ì•„ì„œ, ì–´ë– í•œ íŒŒë„ ì•ì—ì„œë„ ë³¸ì¸ë§Œì˜ ì£¼ê´€ì„ ìƒì§€ ì•Šìœ¼ë ¤ëŠ” ê°•ë ¥í•œ ì—ë„ˆì§€ë¥¼ ë°œì‚°í•©ë‹ˆë‹¤. ` +
                `ì´ëŸ¬í•œ ê¸°ì§ˆì€ ì‚¬íšŒì ìœ¼ë¡œ ë³¸ì¸ì„ ë‹ë³´ì´ê²Œ í•˜ëŠ” ê°•ë ¥í•œ ë¬´ê¸°ê°€ ë˜ë©°, íŠ¹íˆ ì¤‘ë…„ ì´í›„ ë³¸ì¸ì˜ ì •ì²´ì„±ì´ í™•ë¦½ë˜ë©´ì„œ ë”ìš± ë¹›ì„ ë°œí•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.`;
            
            document.getElementById('iljuAnalysis').innerHTML = iljuNarrative;

            let counts = {"ëª©":0, "í™”":0, "í† ":0, "ê¸ˆ":0, "ìˆ˜":0};
            pillars.forEach(p => { counts[WUXING[p.gan]]++; counts[WUXING[p.zhi]]++; });
            let maxEl = Object.keys(counts).reduce((a,b) => counts[a] > counts[b] ? a : b);
            let minEl = Object.keys(counts).reduce((a,b) => counts[a] < counts[b] ? a : b);
            
            const healthMap = {
                "ëª©": "ê°„ì¥, ë‹´ë‚­, ì‹ ê²½ê³„í†µì˜ í”¼ë¡œ ëˆ„ì ", "í™”": "ì‹¬ì¥, ì†Œì¥, í˜ˆì•• ë° ì‹œë ¥ ì €í•˜",
                "í† ": "ìœ„ì¥, ë¹„ì¥, ì†Œí™”ê¸° ê³„í†µì˜ ì¥ì• ", "ê¸ˆ": "í, ëŒ€ì¥, í˜¸í¡ê¸° ë° í”¼ë¶€ íŠ¸ëŸ¬ë¸”",
                "ìˆ˜": "ì‹ ì¥, ë°©ê´‘, ìƒì‹ê¸° ê³„í†µì˜ ëƒ‰ì¦"
            };
            
            const luckyItems = {
                "ëª©": "ì´ˆë¡ìƒ‰ ì†Œí’ˆì´ë‚˜ ë™ìª½ ë°©í–¥",
                "í™”": "ë¶‰ì€ìƒ‰ ê³„ì—´ì´ë‚˜ ë‚¨ìª½",
                "í† ": "í™©í† ìƒ‰ì´ë‚˜ ì¤‘ì•™/ë‚®ì€ ê³³",
                "ê¸ˆ": "í°ìƒ‰/ë©”íƒˆ ì†Œì¬ë‚˜ ì„œìª½",
                "ìˆ˜": "ê²€ì •ìƒ‰/ë¬¼ê°€ë‚˜ ë¶ìª½"
            };

            const wuxingNarrative = 
                `ì‚¬ì£¼ ì›êµ­ ë‚´ ì˜¤í–‰ ë¶„í¬ëŠ” [ëª©(${counts.ëª©}) í™”(${counts.í™”}) í† (${counts.í† }) ê¸ˆ(${counts.ê¸ˆ}) ìˆ˜(${counts.ìˆ˜})]ì…ë‹ˆë‹¤.\n\n` +
                `ê°€ì¥ ê°•ë ¥í•œ ì£¼ë„ ì„¸ë ¥ì€ [${maxEl}]ì´ë©°, ë³´ì™„ì´ í•„ìš”í•œ ê¸°ìš´ì€ [${minEl}]ì…ë‹ˆë‹¤. ` +
                `ì‚¬ì£¼ì—ì„œ [${maxEl}] ê¸°ìš´ì´ ê°•í•˜ë‹¤ëŠ” ê²ƒì€ í•´ë‹¹ ì„±ì§ˆ(ì¶”ì§„ë ¥, ì—´ì •, í¬ìš©, ê²°ë‹¨, ì§€í˜œ ì¤‘ í•´ë‹¹)ì´ ê·€í•˜ì˜ ê°€ì¥ í° ì¥ì ì„ì„ ì˜ë¯¸í•˜ì§€ë§Œ, ì§€ë‚˜ì¹  ê²½ìš° ë…ë‹¨ì ì´ ë˜ê±°ë‚˜ ê±´ê°•ì˜ ë¶ˆê· í˜•ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n` +
                `[ê±´ê°• ë° ê°œìš´ë²•]: ì„ ì²œì ìœ¼ë¡œ [${healthMap[minEl]}]ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ` +
                `ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ í‰ì†Œ [${luckyItems[minEl]}]ì„ ê°€ê¹Œì´ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ` +
                `ê· í˜• ì¡íŒ ì‹ë‹¨ê³¼ í•´ë‹¹ ì˜¤í–‰ì˜ ê¸°ìš´ì„ ë‹ìš°ëŠ” ì·¨ë¯¸ ìƒí™œì´ ìš´ì„ íŠ¸ì´ê²Œ í•˜ëŠ” ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤.`;

            document.getElementById('balanceAnalysis').innerHTML = wuxingNarrative;

            const mZhiWu = WUXING[pillars[2].zhi];
            const meWu = WUXING[me];
            let socialType = "";
            let detailJob = "";
            let jobDesc = ""; // [ìˆ˜ì •3] ê° ìœ í˜•ì— ë§ëŠ” ë§ì¶¤í˜• ë©˜íŠ¸ë¥¼ ì €ì¥í•  ë³€ìˆ˜

            if (mZhiWu === meWu) { 
                socialType = "ë¹„ê²í˜•(ì „ë¬¸ê°€/ë…ë¦½í˜•)"; 
                detailJob = "ììœ  ì „ë¬¸ì§, í”„ë¦¬ëœì„œ, ì˜ˆì²´ëŠ¥, í˜¹ì€ ì¡°ì§ ë‚´ì—ì„œë„ ë…ë¦½ì ì¸ ê¶Œí•œì„ ê°€ì§„ ìœ„ì¹˜";
                jobDesc = "ì¡°ì§ì˜ ë¶€ì†í’ˆì´ ë˜ê¸°ë³´ë‹¤ëŠ”, ë³¸ì¸ì˜ ì´ë¦„ê³¼ ì‹¤ë ¥ì„ ê±¸ê³  ì£¼ì²´ì ìœ¼ë¡œ ì¼í•  ìˆ˜ ìˆëŠ”";
            } else if ((meWu === 'ëª©' && mZhiWu === 'í™”') || (meWu === 'í™”' && mZhiWu === 'í† ') || (meWu === 'í† ' && mZhiWu === 'ê¸ˆ') || (meWu === 'ê¸ˆ' && mZhiWu === 'ìˆ˜') || (meWu === 'ìˆ˜' && mZhiWu === 'ëª©')) {
                socialType = "ì‹ìƒí˜•(ì—°êµ¬/ê¸°ìˆ í˜•)";
                detailJob = "êµìœ¡, ì—°êµ¬ ê°œë°œ, IT/ê¸°ìˆ ì§, ìš”ì‹ì—…, ì˜ˆìˆ  ì°½ì‘, ì–¸ë¡ /ë°©ì†¡";
                jobDesc = "ë‹¨ìˆœ ë°˜ë³µì ì¸ ì—…ë¬´ë³´ë‹¤ëŠ”, íƒ€ê³ ë‚œ ë¼ì™€ ì°½ì˜ì„± ê·¸ë¦¬ê³  ê¸°ìˆ ì„ ë§ˆìŒê» ë°œíœ˜í•  ìˆ˜ ìˆëŠ”";
            } else if ((meWu === 'ëª©' && mZhiWu === 'í† ') || (meWu === 'í™”' && mZhiWu === 'ê¸ˆ') || (meWu === 'í† ' && mZhiWu === 'ìˆ˜') || (meWu === 'ê¸ˆ' && mZhiWu === 'ëª©') || (meWu === 'ìˆ˜' && mZhiWu === 'í™”')) {
                socialType = "ì¬ì„±í˜•(ì‚¬ì—…/ê²½ì˜í˜•)";
                detailJob = "ê¸ˆìœµ, ë¬´ì—­, ìœ í†µ, ì‚¬ì—… ê²½ì˜, ì¬ë¬´ íšŒê³„, ìì‚° ê´€ë¦¬";
                jobDesc = "ê³ ì •ëœ ì›”ê¸‰ë³´ë‹¤ëŠ” ì„±ê³¼ì— ë”°ë¥¸ ë³´ìƒì´ í™•ì‹¤í•˜ë©°, í˜„ì‹¤ì ì¸ ìˆ˜ì¹˜ ê°ê°ì„ í™œìš©í•  ìˆ˜ ìˆëŠ”";
            } else if ((meWu === 'ëª©' && mZhiWu === 'ê¸ˆ') || (meWu === 'í™”' && mZhiWu === 'ìˆ˜') || (meWu === 'í† ' && mZhiWu === 'ëª©') || (meWu === 'ê¸ˆ' && mZhiWu === 'í™”') || (meWu === 'ìˆ˜' && mZhiWu === 'í† ')) {
                socialType = "ê´€ì„±í˜•(ê³µì§/ê´€ë¦¬í˜•)";
                detailJob = "ê³µë¬´ì›, ëŒ€ê¸°ì—… ì¡°ì§, í–‰ì •, ë²•ì¡°ê³„, ì˜ë£Œ í–‰ì •, ê´€ë¦¬ì§";
                jobDesc = "ì²´ê³„ì ì¸ ì‹œìŠ¤í…œê³¼ ê·œìœ¨ì´ ê°–ì¶°ì§„ ì¡°ì§ ë‚´ì—ì„œ, ëª…ì˜ˆì™€ ì•ˆì •ì„ ì¶”êµ¬í•  ìˆ˜ ìˆëŠ”";
            } else {
                socialType = "ì¸ì„±í˜•(í•™ë¬¸/ê¸°íší˜•)";
                detailJob = "êµìˆ˜, í•™ì, ì‘ê°€, ê¸°íšì, ë¼ì´ì„¼ìŠ¤ ì „ë¬¸ì§, ë¶€ë™ì‚° ì„ëŒ€ì—…";
                jobDesc = "í™œë™ì ì¸ ìœ¡ì²´ë…¸ë™ë³´ë‹¤ëŠ”, ê¹Šì€ ì‚¬ê³ ë ¥ê³¼ ìê²©ì¦ ê·¸ë¦¬ê³  ì§€ì  ì¬ì‚°ì„ í™œìš©í•˜ëŠ”";
            }

            const careerNarrative = 
                `ì‚¬íšŒì  í™œë™ ë¬´ëŒ€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì›”ì§€ì˜ ê¸°ìš´ì„ ë¶„ì„í•œ ê²°ê³¼, ê·€í•˜ëŠ” [${socialType}]ì— í•´ë‹¹í•©ë‹ˆë‹¤.\n\n` +
                `ì´ëŠ” ê·€í•˜ê°€ ${jobDesc} [${detailJob}] ë¶„ì•¼ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ë‚¼ ê°€ëŠ¥ì„±ì´ í¼ì„ ì‹œì‚¬í•©ë‹ˆë‹¤. ` +
                `íŠ¹íˆ ì¬ë¬¼ìš´ì€ ì„±ì‹¤í•œ ë…¸ë ¥ê³¼ ë¹„ë¡€í•˜ì—¬ ìƒìŠ¹í•˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, íˆ¬ê¸°ì ì¸ ì´ë“ë³´ë‹¤ëŠ” ë³¸ì¸ì˜ ì „ë¬¸ì„±ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì†Œë“ì´ í›¨ì”¬ ì•ˆì •ì ì´ê³  í½ë‹ˆë‹¤.\n\n` +
                `ì§ì—…ì ìœ¼ë¡œ ì„±ê³µí•˜ê¸° ìœ„í•´ì„œëŠ” [${pillars[2].zhi}]ê°€ ìƒì§•í•˜ëŠ” ê³„ì ˆì˜ ê¸°ìš´ì„ ì˜ í™œìš©í•˜ì—¬, ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ëŠì„ì—†ì´ ìê¸° ê°€ì¹˜ë¥¼ ë†’ì´ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.`;

            document.getElementById('careerAnalysis').innerHTML = careerNarrative;

            const totalNarrative = 
                `ì •í†µ ì‚¬ì£¼ ë¶„ì„ì„ ì¢…í•©í•´ ë³¼ ë•Œ, [${name}]ë‹˜ì˜ ìš´ëª…ì€ ì´ˆë…„ì˜ [${pillars[3].gan}] ê¸°ìš´ì—ì„œ ì‹œì‘í•˜ì—¬ ì¤‘ë…„ ì´í›„ [${pillars[1].zhi}]ì˜ ì˜í–¥ë ¥ì´ ì»¤ì§€ë©° ì™„ì„±ë˜ëŠ” íë¦„ì…ë‹ˆë‹¤.\n\n` +
                `ëŒ€ìš´ì´ [${isForward ? 'ìˆœí–‰' : 'ì—­í–‰'}]í•œë‹¤ëŠ” ê²ƒì€ ì¸ìƒì˜ ì „ê°œê°€ ${isForward ? 'ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìˆœì„œëŒ€ë¡œ ì°¨ê·¼ì°¨ê·¼' : 'ë³€í™”ë¬´ìŒí•˜ê³  ì—­ë™ì ìœ¼ë¡œ'} í¼ì³ì§ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ` +
                `í˜„ì¬ ê·€í•˜ëŠ” ë³¸ì¸ì´ ê°€ì§„ ê°€ì¥ ê°•ë ¥í•œ ë¬´ê¸°ì¸ [${maxEl}]ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•˜ê³ , ë¶€ì¡±í•œ [${minEl}]ì„ ì§€í˜œë¡­ê²Œ ë³´ì™„í•´ì•¼ í•  ì‹œì ì…ë‹ˆë‹¤.\n\n` +
                `ì‚¬ì£¼ëŠ” ì •í•´ì§„ ìš´ëª…ì´ ì•„ë‹ˆë¼, ë‚´ê°€ ê°€ì§„ ì¬ë£Œë¥¼ ì–´ë–»ê²Œ ìš”ë¦¬í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ë ˆì‹œí”¼ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ í™•ì¸í•œ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ê°•ì ì€ ì‚´ë¦¬ê³  ì•½ì ì€ ë³´ì™„í•˜ì—¬ ì£¼ì²´ì ì´ê³  í–‰ë³µí•œ ì‚¶ì„ ê°œì²™í•´ ë‚˜ê°€ì‹œê¸¸ ì§„ì‹¬ìœ¼ë¡œ ì‘ì›í•©ë‹ˆë‹¤.`;

            document.getElementById('totalAdvice').innerHTML = totalNarrative;

            document.getElementById('result-area').style.display = 'block';
            window.scrollTo({ top: document.getElementById('result-area').offsetTop - 100, behavior: 'smooth' });
        }
    </script>
</body>
</html>